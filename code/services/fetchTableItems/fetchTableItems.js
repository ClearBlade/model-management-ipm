!function(){var e={7162:function(e,t,r){e.exports=r(5047)},2009:function(e,t,r){var n=r(9);e.exports=n},1094:function(e,t,r){var n=r(251);e.exports=n},5529:function(e,t,r){r(5735),r(8188),r(3244),r(8673);var n=r(9276);e.exports=n.Set},1647:function(e,t,r){r(5735),r(8188),r(2356);var n=r(9276);e.exports=n.WeakMap},8993:function(e,t,r){var n=r(2009);r(8897),r(1873),r(5682),r(1045),r(2068),r(7244),r(5519),r(9432),r(3574),r(3619),r(3862),r(6881),r(5359),r(8208),r(3608),r(5676),r(5993),r(4456),e.exports=n},8123:function(e,t,r){var n=r(1094);r(8673),r(3331),r(2938),r(8685),r(7236),r(1712),e.exports=n},7111:function(e,t,r){var n=r(9859),i=r(6733),o=r(9821),a=n.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a function")}},7988:function(e,t,r){var n=r(9859),i=r(2359),o=r(9821),a=n.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a constructor")}},8505:function(e,t,r){var n=r(9859),i=r(6733),o=n.String,a=n.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},9736:function(e,t,r){var n=r(95),i=r(2391),o=r(1787),a=n("unscopables"),u=Array.prototype;null==u[a]&&o.f(u,a,{configurable:!0,value:i(null)}),e.exports=function(e){u[a][e]=!0}},7728:function(e,t,r){var n=r(9859),i=r(1321),o=n.TypeError;e.exports=function(e,t){if(i(t,e))return e;throw o("Incorrect invocation")}},1176:function(e,t,r){var n=r(9859),i=r(5052),o=n.String,a=n.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not an object")}},2460:function(e,t,r){var n=r(4229);e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},6570:function(e,t,r){"use strict";var n=r(9996).forEach,i=r(6038)("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},507:function(e,t,r){"use strict";var n=r(9859),i=r(7636),o=r(266),a=r(2991),u=r(4960),c=r(1943),s=r(2359),l=r(9646),f=r(2324),p=r(8403),d=r(8830),v=n.Array;e.exports=function(e){var t=a(e),r=s(this),n=arguments.length,h=n>1?arguments[1]:void 0,y=void 0!==h;y&&(h=i(h,n>2?arguments[2]:void 0));var g,_,S,b,m,O,E=d(t),T=0;if(!E||this==v&&c(E))for(g=l(t),_=r?new this(g):v(g);g>T;T++)O=y?h(t[T],T):t[T],f(_,T,O);else for(m=(b=p(t,E)).next,_=r?new this:[];!(S=o(m,b)).done;T++)O=y?u(b,h,[S.value,T],!0):S.value,f(_,T,O);return _.length=T,_}},9540:function(e,t,r){var n=r(905),i=r(3231),o=r(9646),a=function(e){return function(t,r,a){var u,c=n(t),s=o(c),l=i(a,s);if(e&&r!=r){for(;s>l;)if((u=c[l++])!=u)return!0}else for(;s>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},9996:function(e,t,r){var n=r(7636),i=r(5968),o=r(9337),a=r(2991),u=r(9646),c=r(7501),s=i([].push),l=function(e){var t=1==e,r=2==e,i=3==e,l=4==e,f=6==e,p=7==e,d=5==e||f;return function(v,h,y,g){for(var _,S,b=a(v),m=o(b),O=n(h,y),E=u(m),T=0,R=g||c,w=t?R(v,E):r||p?R(v,0):void 0;E>T;T++)if((d||T in m)&&(S=O(_=m[T],T,b),e))if(t)w[T]=S;else if(S)switch(e){case 3:return!0;case 5:return _;case 6:return T;case 2:s(w,_)}else switch(e){case 4:return!1;case 7:s(w,_)}return f?-1:i||l?l:w}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},1460:function(e,t,r){var n=r(4229),i=r(95),o=r(6358),a=i("species");e.exports=function(e){return o>=51||!n((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},6038:function(e,t,r){"use strict";var n=r(4229);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},3143:function(e,t,r){var n=r(9859),i=r(7111),o=r(2991),a=r(9337),u=r(9646),c=n.TypeError,s=function(e){return function(t,r,n,s){i(r);var l=o(t),f=a(l),p=u(l),d=e?p-1:0,v=e?-1:1;if(n<2)for(;;){if(d in f){s=f[d],d+=v;break}if(d+=v,e?d<0:p<=d)throw c("Reduce of empty array with no initial value")}for(;e?d>=0:p>d;d+=v)d in f&&(s=r(s,f[d],d,l));return s}};e.exports={left:s(!1),right:s(!0)}},9794:function(e,t,r){var n=r(9859),i=r(3231),o=r(9646),a=r(2324),u=n.Array,c=Math.max;e.exports=function(e,t,r){for(var n=o(e),s=i(t,n),l=i(void 0===r?n:r,n),f=u(c(l-s,0)),p=0;s<l;s++,p++)a(f,p,e[s]);return f.length=p,f}},1909:function(e,t,r){var n=r(5968);e.exports=n([].slice)},8760:function(e,t,r){var n=r(9859),i=r(3718),o=r(2359),a=r(5052),u=r(95)("species"),c=n.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,(o(t)&&(t===c||i(t.prototype))||a(t)&&null===(t=t[u]))&&(t=void 0)),void 0===t?c:t}},7501:function(e,t,r){var n=r(8760);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},4960:function(e,t,r){var n=r(1176),i=r(7281);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){i(e,"throw",t)}}},4575:function(e,t,r){var n=r(95)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},7079:function(e,t,r){var n=r(5968),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},1589:function(e,t,r){var n=r(9859),i=r(1601),o=r(6733),a=r(7079),u=r(95)("toStringTag"),c=n.Object,s="Arguments"==a(function(){return arguments}());e.exports=i?a:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=c(e),u))?r:s?a(t):"Object"==(n=a(t))&&o(t.callee)?"Arguments":n}},1590:function(e,t,r){var n=r(5968)("".replace),i=String(Error("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,a=o.test(i);e.exports=function(e,t){if(a&&"string"==typeof e)for(;t--;)e=n(e,o,"");return e}},3953:function(e,t,r){"use strict";var n=r(266),i=r(7111),o=r(1176);e.exports=function(){for(var e=o(this),t=i(e.add),r=0,a=arguments.length;r<a;r++)n(t,e,arguments[r]);return e}},1250:function(e,t,r){"use strict";var n=r(266),i=r(7111),o=r(1176);e.exports=function(){for(var e,t=o(this),r=i(t.delete),a=!0,u=0,c=arguments.length;u<c;u++)e=n(r,t,arguments[u]),a=a&&e;return!!a}},4387:function(e,t,r){"use strict";var n=r(7636),i=r(266),o=r(7111),a=r(7988),u=r(9003),c=[].push;e.exports=function(e){var t,r,s,l,f=arguments.length,p=f>1?arguments[1]:void 0;return a(this),(t=void 0!==p)&&o(p),null==e?new this:(r=[],t?(s=0,l=n(p,f>2?arguments[2]:void 0),u(e,(function(e){i(c,r,l(e,s++))}))):u(e,c,{that:r}),new this(r))}},5777:function(e,t,r){"use strict";var n=r(1909);e.exports=function(){return new this(n(arguments))}},8081:function(e,t,r){"use strict";var n=r(1787).f,i=r(2391),o=r(8787),a=r(7636),u=r(7728),c=r(9003),s=r(7675),l=r(1832),f=r(7400),p=r(5926).fastKey,d=r(6407),v=d.set,h=d.getterFor;e.exports={getConstructor:function(e,t,r,s){var l=e((function(e,n){u(e,d),v(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),f||(e.size=0),null!=n&&c(n,e[s],{that:e,AS_ENTRIES:r})})),d=l.prototype,y=h(t),g=function(e,t,r){var n,i,o=y(e),a=_(e,t);return a?a.value=r:(o.last=a={index:i=p(t,!0),key:t,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),f?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},_=function(e,t){var r,n=y(e),i=p(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return o(d,{clear:function(){for(var e=y(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,f?e.size=0:this.size=0},delete:function(e){var t=this,r=y(t),n=_(t,e);if(n){var i=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),r.first==n&&(r.first=i),r.last==n&&(r.last=o),f?r.size--:t.size--}return!!n},forEach:function(e){for(var t,r=y(this),n=a(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!_(this,e)}}),o(d,r?{get:function(e){var t=_(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),f&&n(d,"size",{get:function(){return y(this).size}}),l},setStrong:function(e,t,r){var n=t+" Iterator",i=h(t),o=h(n);s(e,t,(function(e,t){v(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),l(t)}}},3370:function(e,t,r){"use strict";var n=r(5968),i=r(8787),o=r(5926).getWeakData,a=r(1176),u=r(5052),c=r(7728),s=r(9003),l=r(9996),f=r(8270),p=r(6407),d=p.set,v=p.getterFor,h=l.find,y=l.findIndex,g=n([].splice),_=0,S=function(e){return e.frozen||(e.frozen=new b)},b=function(){this.entries=[]},m=function(e,t){return h(e.entries,(function(e){return e[0]===t}))};b.prototype={get:function(e){var t=m(this,e);if(t)return t[1]},has:function(e){return!!m(this,e)},set:function(e,t){var r=m(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=y(this.entries,(function(t){return t[0]===e}));return~t&&g(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,r,n){var l=e((function(e,i){c(e,p),d(e,{type:t,id:_++,frozen:void 0}),null!=i&&s(i,e[n],{that:e,AS_ENTRIES:r})})),p=l.prototype,h=v(t),y=function(e,t,r){var n=h(e),i=o(a(t),!0);return!0===i?S(n).set(t,r):i[n.id]=r,e};return i(p,{delete:function(e){var t=h(this);if(!u(e))return!1;var r=o(e);return!0===r?S(t).delete(e):r&&f(r,t.id)&&delete r[t.id]},has:function(e){var t=h(this);if(!u(e))return!1;var r=o(e);return!0===r?S(t).has(e):r&&f(r,t.id)}}),i(p,r?{get:function(e){var t=h(this);if(u(e)){var r=o(e);return!0===r?S(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return y(this,e,t)}}:{add:function(e){return y(this,e,!0)}}),l}}},9789:function(e,t,r){"use strict";var n=r(3103),i=r(9859),o=r(5968),a=r(6541),u=r(7487),c=r(5926),s=r(9003),l=r(7728),f=r(6733),p=r(5052),d=r(4229),v=r(4575),h=r(4555),y=r(835);e.exports=function(e,t,r){var g=-1!==e.indexOf("Map"),_=-1!==e.indexOf("Weak"),S=g?"set":"add",b=i[e],m=b&&b.prototype,O=b,E={},T=function(e){var t=o(m[e]);u(m,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(_&&!p(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return _&&!p(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(_&&!p(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(a(e,!f(b)||!(_||m.forEach&&!d((function(){(new b).entries().next()})))))O=r.getConstructor(t,e,g,S),c.enable();else if(a(e,!0)){var R=new O,w=R[S](_?{}:-0,1)!=R,A=d((function(){R.has(1)})),P=v((function(e){new b(e)})),N=!_&&d((function(){for(var e=new b,t=5;t--;)e[S](t,t);return!e.has(-0)}));P||((O=t((function(e,t){l(e,m);var r=y(new b,e,O);return null!=t&&s(t,r[S],{that:r,AS_ENTRIES:g}),r}))).prototype=m,m.constructor=O),(A||N)&&(T("delete"),T("has"),g&&T("get")),(N||w)&&T(S),_&&m.clear&&delete m.clear}return E[e]=O,n({global:!0,forced:O!=b},E),h(O,e),_||r.setStrong(O,e,g),O}},7081:function(e,t,r){var n=r(8270),i=r(4826),o=r(7933),a=r(1787);e.exports=function(e,t,r){for(var u=i(t),c=a.f,s=o.f,l=0;l<u.length;l++){var f=u[l];n(e,f)||r&&n(r,f)||c(e,f,s(t,f))}}},7528:function(e,t,r){var n=r(4229);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},3723:function(e,t,r){"use strict";var n=r(693).IteratorPrototype,i=r(2391),o=r(5358),a=r(4555),u=r(5495),c=function(){return this};e.exports=function(e,t,r,s){var l=t+" Iterator";return e.prototype=i(n,{next:o(+!s,r)}),a(e,l,!1,!0),u[l]=c,e}},5762:function(e,t,r){var n=r(7400),i=r(1787),o=r(5358);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},5358:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2324:function(e,t,r){"use strict";var n=r(9310),i=r(1787),o=r(5358);e.exports=function(e,t,r){var a=n(t);a in e?i.f(e,a,o(0,r)):e[a]=r}},6966:function(e,t,r){"use strict";var n=r(9859),i=r(5968),o=r(4229),a=r(6650).start,u=n.RangeError,c=Math.abs,s=Date.prototype,l=s.toISOString,f=i(s.getTime),p=i(s.getUTCDate),d=i(s.getUTCFullYear),v=i(s.getUTCHours),h=i(s.getUTCMilliseconds),y=i(s.getUTCMinutes),g=i(s.getUTCMonth),_=i(s.getUTCSeconds);e.exports=o((function(){return"0385-07-25T07:06:39.999Z"!=l.call(new Date(-50000000000001))}))||!o((function(){l.call(new Date(NaN))}))?function(){if(!isFinite(f(this)))throw u("Invalid time value");var e=this,t=d(e),r=h(e),n=t<0?"-":t>9999?"+":"";return n+a(c(t),n?6:4,0)+"-"+a(g(e)+1,2,0)+"-"+a(p(e),2,0)+"T"+a(v(e),2,0)+":"+a(y(e),2,0)+":"+a(_(e),2,0)+"."+a(r,3,0)+"Z"}:l},7675:function(e,t,r){"use strict";var n=r(3103),i=r(266),o=r(4231),a=r(1805),u=r(6733),c=r(3723),s=r(7567),l=r(6540),f=r(4555),p=r(5762),d=r(7487),v=r(95),h=r(5495),y=r(693),g=a.PROPER,_=a.CONFIGURABLE,S=y.IteratorPrototype,b=y.BUGGY_SAFARI_ITERATORS,m=v("iterator"),O="keys",E="values",T="entries",R=function(){return this};e.exports=function(e,t,r,a,v,y,w){c(r,t,a);var A,P,N,k=function(e){if(e===v&&U)return U;if(!b&&e in j)return j[e];switch(e){case O:case E:case T:return function(){return new r(this,e)}}return function(){return new r(this)}},I=t+" Iterator",x=!1,j=e.prototype,C=j[m]||j["@@iterator"]||v&&j[v],U=!b&&C||k(v),L="Array"==t&&j.entries||C;if(L&&(A=s(L.call(new e)))!==Object.prototype&&A.next&&(o||s(A)===S||(l?l(A,S):u(A[m])||d(A,m,R)),f(A,I,!0,!0),o&&(h[I]=R)),g&&v==E&&C&&C.name!==E&&(!o&&_?p(j,"name",E):(x=!0,U=function(){return i(C,this)})),v)if(P={values:k(E),keys:y?U:k(O),entries:k(T)},w)for(N in P)(b||x||!(N in j))&&d(j,N,P[N]);else n({target:t,proto:!0,forced:b||x},P);return o&&!w||j[m]===U||d(j,m,U,{name:v}),h[t]=U,P}},8423:function(e,t,r){var n=r(9276),i=r(8270),o=r(5391),a=r(1787).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},7400:function(e,t,r){var n=r(4229);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2635:function(e,t,r){var n=r(9859),i=r(5052),o=n.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},5694:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8865:function(e,t,r){var n=r(2635)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},8801:function(e,t,r){var n=r(7079),i=r(9859);e.exports="process"==n(i.process)},598:function(e,t,r){var n=r(1333);e.exports=n("navigator","userAgent")||""},6358:function(e,t,r){var n,i,o=r(9859),a=r(598),u=o.process,c=o.Deno,s=u&&u.versions||c&&c.version,l=s&&s.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},3837:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},373:function(e,t,r){var n=r(4229),i=r(5358);e.exports=!n((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},8864:function(e,t,r){"use strict";var n=r(7400),i=r(4229),o=r(1176),a=r(2391),u=r(635),c=Error.prototype.toString,s=i((function(){if(n){var e=a(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==c.call(e))return!0}return"2: 1"!==c.call({message:1,name:2})||"Error"!==c.call({})}));e.exports=s?function(){var e=o(this),t=u(e.name,"Error"),r=u(e.message);return t?r?t+": "+r:t:r}:c},3103:function(e,t,r){var n=r(9859),i=r(7933).f,o=r(5762),a=r(7487),u=r(2079),c=r(7081),s=r(6541);e.exports=function(e,t){var r,l,f,p,d,v=e.target,h=e.global,y=e.stat;if(r=h?n:y?n[v]||u(v,{}):(n[v]||{}).prototype)for(l in t){if(p=t[l],f=e.noTargetGet?(d=i(r,l))&&d.value:r[l],!s(h?l:v+(y?".":"#")+l,e.forced)&&void 0!==f){if(typeof p==typeof f)continue;c(p,f)}(e.sham||f&&f.sham)&&o(p,"sham",!0),a(r,l,p,e)}}},4229:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},8476:function(e,t,r){var n=r(4229);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},3171:function(e,t,r){var n=r(7188),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(o):function(){return a.apply(o,arguments)})},7636:function(e,t,r){var n=r(5968),i=r(7111),o=r(7188),a=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},7188:function(e,t,r){var n=r(4229);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},266:function(e,t,r){var n=r(7188),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},1805:function(e,t,r){var n=r(7400),i=r(8270),o=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,u=i(o,"name"),c=u&&"something"===function(){}.name,s=u&&(!n||n&&a(o,"name").configurable);e.exports={EXISTS:u,PROPER:c,CONFIGURABLE:s}},5968:function(e,t,r){var n=r(7188),i=Function.prototype,o=i.bind,a=i.call,u=n&&o.bind(a,a);e.exports=n?function(e){return e&&u(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},1333:function(e,t,r){var n=r(9859),i=r(6733),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(n[e]):n[e]&&n[e][t]}},8830:function(e,t,r){var n=r(1589),i=r(5300),o=r(5495),a=r(95)("iterator");e.exports=function(e){if(null!=e)return i(e,a)||i(e,"@@iterator")||o[n(e)]}},8403:function(e,t,r){var n=r(9859),i=r(266),o=r(7111),a=r(1176),u=r(9821),c=r(8830),s=n.TypeError;e.exports=function(e,t){var r=arguments.length<2?c(e):t;if(o(r))return a(i(r,e));throw s(u(e)+" is not iterable")}},5300:function(e,t,r){var n=r(7111);e.exports=function(e,t){var r=e[t];return null==r?void 0:n(r)}},3817:function(e,t,r){var n=r(266);e.exports=function(e){return n(Set.prototype.values,e)}},9859:function(e,t,r){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},8270:function(e,t,r){var n=r(5968),i=r(2991),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},5977:function(e){e.exports={}},3777:function(e,t,r){var n=r(1333);e.exports=n("document","documentElement")},4394:function(e,t,r){var n=r(7400),i=r(4229),o=r(2635);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},9337:function(e,t,r){var n=r(9859),i=r(5968),o=r(4229),a=r(7079),u=n.Object,c=i("".split);e.exports=o((function(){return!u("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?c(e,""):u(e)}:u},835:function(e,t,r){var n=r(6733),i=r(5052),o=r(6540);e.exports=function(e,t,r){var a,u;return o&&n(a=t.constructor)&&a!==r&&i(u=a.prototype)&&u!==r.prototype&&o(e,u),e}},8511:function(e,t,r){var n=r(5968),i=r(6733),o=r(5353),a=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},9679:function(e,t,r){var n=r(5052),i=r(5762);e.exports=function(e,t){n(t)&&"cause"in t&&i(e,"cause",t.cause)}},5926:function(e,t,r){var n=r(3103),i=r(5968),o=r(5977),a=r(5052),u=r(8270),c=r(1787).f,s=r(8151),l=r(166),f=r(5343),p=r(1441),d=r(8476),v=!1,h=p("meta"),y=0,g=function(e){c(e,h,{value:{objectID:"O"+y++,weakData:{}}})},_=e.exports={enable:function(){_.enable=function(){},v=!0;var e=s.f,t=i([].splice),r={};r[h]=1,e(r).length&&(s.f=function(r){for(var n=e(r),i=0,o=n.length;i<o;i++)if(n[i]===h){t(n,i,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!u(e,h)){if(!f(e))return"F";if(!t)return"E";g(e)}return e[h].objectID},getWeakData:function(e,t){if(!u(e,h)){if(!f(e))return!0;if(!t)return!1;g(e)}return e[h].weakData},onFreeze:function(e){return d&&v&&f(e)&&!u(e,h)&&g(e),e}};o[h]=!0},6407:function(e,t,r){var n,i,o,a=r(8694),u=r(9859),c=r(5968),s=r(5052),l=r(5762),f=r(8270),p=r(5353),d=r(4399),v=r(5977),h="Object already initialized",y=u.TypeError,g=u.WeakMap;if(a||p.state){var _=p.state||(p.state=new g),S=c(_.get),b=c(_.has),m=c(_.set);n=function(e,t){if(b(_,e))throw new y(h);return t.facade=e,m(_,e,t),t},i=function(e){return S(_,e)||{}},o=function(e){return b(_,e)}}else{var O=d("state");v[O]=!0,n=function(e,t){if(f(e,O))throw new y(h);return t.facade=e,l(e,O,t),t},i=function(e){return f(e,O)?e[O]:{}},o=function(e){return f(e,O)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!s(t)||(r=i(t)).type!==e)throw y("Incompatible receiver, "+e+" required");return r}}}},1943:function(e,t,r){var n=r(95),i=r(5495),o=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},3718:function(e,t,r){var n=r(7079);e.exports=Array.isArray||function(e){return"Array"==n(e)}},6733:function(e){e.exports=function(e){return"function"==typeof e}},2359:function(e,t,r){var n=r(5968),i=r(4229),o=r(6733),a=r(1589),u=r(1333),c=r(8511),s=function(){},l=[],f=u("Reflect","construct"),p=/^\s*(?:class|function)\b/,d=n(p.exec),v=!p.exec(s),h=function(e){if(!o(e))return!1;try{return f(s,l,e),!0}catch(e){return!1}},y=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return v||!!d(p,c(e))}catch(e){return!0}};y.sham=!0,e.exports=!f||i((function(){var e;return h(h.call)||!h(Object)||!h((function(){e=!0}))||e}))?y:h},6541:function(e,t,r){var n=r(4229),i=r(6733),o=/#|\.prototype\./,a=function(e,t){var r=c[u(e)];return r==l||r!=s&&(i(t)?n(t):!!t)},u=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=a.data={},s=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},5052:function(e,t,r){var n=r(6733);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},4231:function(e){e.exports=!1},9395:function(e,t,r){var n=r(9859),i=r(1333),o=r(6733),a=r(1321),u=r(6969),c=n.Object;e.exports=u?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return o(t)&&a(t.prototype,c(e))}},9003:function(e,t,r){var n=r(9859),i=r(7636),o=r(266),a=r(1176),u=r(9821),c=r(1943),s=r(9646),l=r(1321),f=r(8403),p=r(8830),d=r(7281),v=n.TypeError,h=function(e,t){this.stopped=e,this.result=t},y=h.prototype;e.exports=function(e,t,r){var n,g,_,S,b,m,O,E=r&&r.that,T=!(!r||!r.AS_ENTRIES),R=!(!r||!r.IS_ITERATOR),w=!(!r||!r.INTERRUPTED),A=i(t,E),P=function(e){return n&&d(n,"normal",e),new h(!0,e)},N=function(e){return T?(a(e),w?A(e[0],e[1],P):A(e[0],e[1])):w?A(e,P):A(e)};if(R)n=e;else{if(!(g=p(e)))throw v(u(e)+" is not iterable");if(c(g)){for(_=0,S=s(e);S>_;_++)if((b=N(e[_]))&&l(y,b))return b;return new h(!1)}n=f(e,g)}for(m=n.next;!(O=o(m,n)).done;){try{b=N(O.value)}catch(e){d(n,"throw",e)}if("object"==typeof b&&b&&l(y,b))return b}return new h(!1)}},7281:function(e,t,r){var n=r(266),i=r(1176),o=r(5300);e.exports=function(e,t,r){var a,u;i(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw r;return r}a=n(a,e)}catch(e){u=!0,a=e}if("throw"===t)throw r;if(u)throw a;return i(a),r}},693:function(e,t,r){"use strict";var n,i,o,a=r(4229),u=r(6733),c=r(2391),s=r(7567),l=r(7487),f=r(95),p=r(4231),d=f("iterator"),v=!1;[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(n=i):v=!0),null==n||a((function(){var e={};return n[d].call(e)!==e}))?n={}:p&&(n=c(n)),u(n[d])||l(n,d,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:v}},5495:function(e){e.exports={}},9646:function(e,t,r){var n=r(4237);e.exports=function(e){return n(e.length)}},869:function(e,t,r){"use strict";var n=r(266),i=r(7111),o=r(1176);e.exports=function(e,t){var r=o(this),a=i(r.get),u=i(r.has),c=i(r.set),s=n(u,r,e)&&"update"in t?t.update(n(a,r,e),e,r):t.insert(e,r);return n(c,r,e,s),s}},8185:function(e,t,r){"use strict";var n=r(9859),i=r(266),o=r(7111),a=r(6733),u=r(1176),c=n.TypeError;e.exports=function(e,t){var r,n=u(this),s=o(n.get),l=o(n.has),f=o(n.set),p=arguments.length>2?arguments[2]:void 0;if(!a(t)&&!a(p))throw c("At least one callback required");return i(l,n,e)?(r=i(s,n,e),a(t)&&(r=t(r),i(f,n,e,r))):a(p)&&(r=p(),i(f,n,e,r)),r}},3839:function(e,t,r){var n=r(6358),i=r(4229);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8694:function(e,t,r){var n=r(9859),i=r(6733),o=r(8511),a=n.WeakMap;e.exports=i(a)&&/native code/.test(o(a))},635:function(e,t,r){var n=r(3326);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},2391:function(e,t,r){var n,i=r(1176),o=r(219),a=r(3837),u=r(5977),c=r(3777),s=r(2635),l=r(4399)("IE_PROTO"),f=function(){},p=function(e){return"<script>"+e+"<\/script>"},d=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t;v="undefined"!=typeof document?document.domain&&n?d(n):((t=s("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F):d(n);for(var r=a.length;r--;)delete v.prototype[a[r]];return v()};u[l]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f.prototype=i(e),r=new f,f.prototype=null,r[l]=e):r=v(),void 0===t?r:o.f(r,t)}},219:function(e,t,r){var n=r(7400),i=r(7137),o=r(1787),a=r(1176),u=r(905),c=r(5632);t.f=n&&!i?Object.defineProperties:function(e,t){a(e);for(var r,n=u(t),i=c(t),s=i.length,l=0;s>l;)o.f(e,r=i[l++],n[r]);return e}},1787:function(e,t,r){var n=r(9859),i=r(7400),o=r(4394),a=r(7137),u=r(1176),c=r(9310),s=n.TypeError,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor;t.f=i?a?function(e,t,r){if(u(e),t=c(t),u(r),"function"==typeof e&&"prototype"===t&&"value"in r&&"writable"in r&&!r.writable){var n=f(e,t);n&&n.writable&&(e[t]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return l(e,t,r)}:l:function(e,t,r){if(u(e),t=c(t),u(r),o)try{return l(e,t,r)}catch(e){}if("get"in r||"set"in r)throw s("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},7933:function(e,t,r){var n=r(7400),i=r(266),o=r(9195),a=r(5358),u=r(905),c=r(9310),s=r(8270),l=r(4394),f=Object.getOwnPropertyDescriptor;t.f=n?f:function(e,t){if(e=u(e),t=c(t),l)try{return f(e,t)}catch(e){}if(s(e,t))return a(!i(o.f,e,t),e[t])}},166:function(e,t,r){var n=r(7079),i=r(905),o=r(8151).f,a=r(9794),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return u&&"Window"==n(e)?function(e){try{return o(e)}catch(e){return a(u)}}(e):o(i(e))}},8151:function(e,t,r){var n=r(140),i=r(3837).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},894:function(e,t){t.f=Object.getOwnPropertySymbols},7567:function(e,t,r){var n=r(9859),i=r(8270),o=r(6733),a=r(2991),u=r(4399),c=r(7528),s=u("IE_PROTO"),l=n.Object,f=l.prototype;e.exports=c?l.getPrototypeOf:function(e){var t=a(e);if(i(t,s))return t[s];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof l?f:null}},5343:function(e,t,r){var n=r(4229),i=r(5052),o=r(7079),a=r(2460),u=Object.isExtensible,c=n((function(){u(1)}));e.exports=c||a?function(e){return!!i(e)&&(!a||"ArrayBuffer"!=o(e))&&(!u||u(e))}:u},1321:function(e,t,r){var n=r(5968);e.exports=n({}.isPrototypeOf)},140:function(e,t,r){var n=r(5968),i=r(8270),o=r(905),a=r(9540).indexOf,u=r(5977),c=n([].push);e.exports=function(e,t){var r,n=o(e),s=0,l=[];for(r in n)!i(u,r)&&i(n,r)&&c(l,r);for(;t.length>s;)i(n,r=t[s++])&&(~a(l,r)||c(l,r));return l}},5632:function(e,t,r){var n=r(140),i=r(3837);e.exports=Object.keys||function(e){return n(e,i)}},9195:function(e,t){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},6540:function(e,t,r){var n=r(5968),i=r(1176),o=r(8505);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),o(n),t?e(r,n):r.__proto__=n,r}}():void 0)},4059:function(e,t,r){"use strict";var n=r(1601),i=r(1589);e.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},2914:function(e,t,r){var n=r(9859),i=r(266),o=r(6733),a=r(5052),u=n.TypeError;e.exports=function(e,t){var r,n;if("string"===t&&o(r=e.toString)&&!a(n=i(r,e)))return n;if(o(r=e.valueOf)&&!a(n=i(r,e)))return n;if("string"!==t&&o(r=e.toString)&&!a(n=i(r,e)))return n;throw u("Can't convert object to primitive value")}},4826:function(e,t,r){var n=r(1333),i=r(5968),o=r(8151),a=r(894),u=r(1176),c=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(u(e)),r=a.f;return r?c(t,r(e)):t}},9276:function(e,t,r){var n=r(9859);e.exports=n},8787:function(e,t,r){var n=r(7487);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},7487:function(e,t,r){var n=r(9859),i=r(6733),o=r(8270),a=r(5762),u=r(2079),c=r(8511),s=r(6407),l=r(1805).CONFIGURABLE,f=s.get,p=s.enforce,d=String(String).split("String");(e.exports=function(e,t,r,c){var s,f=!!c&&!!c.unsafe,v=!!c&&!!c.enumerable,h=!!c&&!!c.noTargetGet,y=c&&void 0!==c.name?c.name:t;i(r)&&("Symbol("===String(y).slice(0,7)&&(y="["+String(y).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(r,"name")||l&&r.name!==y)&&a(r,"name",y),(s=p(r)).source||(s.source=d.join("string"==typeof y?y:""))),e!==n?(f?!h&&e[t]&&(v=!0):delete e[t],v?e[t]=r:a(e,t,r)):v?e[t]=r:u(t,r)})(Function.prototype,"toString",(function(){return i(this)&&f(this).source||c(this)}))},8885:function(e,t,r){var n=r(9859).TypeError;e.exports=function(e){if(null==e)throw n("Can't call method on "+e);return e}},2079:function(e,t,r){var n=r(9859),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},1832:function(e,t,r){"use strict";var n=r(1333),i=r(1787),o=r(95),a=r(7400),u=o("species");e.exports=function(e){var t=n(e),r=i.f;a&&t&&!t[u]&&r(t,u,{configurable:!0,get:function(){return this}})}},4555:function(e,t,r){var n=r(1787).f,i=r(8270),o=r(95)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!i(e,o)&&n(e,o,{configurable:!0,value:t})}},4399:function(e,t,r){var n=r(3036),i=r(1441),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5353:function(e,t,r){var n=r(9859),i=r(2079),o="__core-js_shared__",a=n[o]||i(o,{});e.exports=a},3036:function(e,t,r){var n=r(4231),i=r(5353);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.3",mode:n?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},7942:function(e,t,r){var n=r(1176),i=r(7988),o=r(95)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[o])?t:i(r)}},966:function(e,t,r){var n=r(5968),i=r(3329),o=r(3326),a=r(8885),u=n("".charAt),c=n("".charCodeAt),s=n("".slice),l=function(e){return function(t,r){var n,l,f=o(a(t)),p=i(r),d=f.length;return p<0||p>=d?e?"":void 0:(n=c(f,p))<55296||n>56319||p+1===d||(l=c(f,p+1))<56320||l>57343?e?u(f,p):n:e?s(f,p,p+2):l-56320+(n-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},6650:function(e,t,r){var n=r(5968),i=r(4237),o=r(3326),a=r(3124),u=r(8885),c=n(a),s=n("".slice),l=Math.ceil,f=function(e){return function(t,r,n){var a,f,p=o(u(t)),d=i(r),v=p.length,h=void 0===n?" ":o(n);return d<=v||""==h?p:((f=c(h,l((a=d-v)/h.length))).length>a&&(f=s(f,0,a)),e?p+f:f+p)}};e.exports={start:f(!1),end:f(!0)}},3124:function(e,t,r){"use strict";var n=r(9859),i=r(3329),o=r(3326),a=r(8885),u=n.RangeError;e.exports=function(e){var t=o(a(this)),r="",n=i(e);if(n<0||n==1/0)throw u("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r}},3231:function(e,t,r){var n=r(3329),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},905:function(e,t,r){var n=r(9337),i=r(8885);e.exports=function(e){return n(i(e))}},3329:function(e){var t=Math.ceil,r=Math.floor;e.exports=function(e){var n=+e;return n!=n||0===n?0:(n>0?r:t)(n)}},4237:function(e,t,r){var n=r(3329),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},2991:function(e,t,r){var n=r(9859),i=r(8885),o=n.Object;e.exports=function(e){return o(i(e))}},2066:function(e,t,r){var n=r(9859),i=r(266),o=r(5052),a=r(9395),u=r(5300),c=r(2914),s=r(95),l=n.TypeError,f=s("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var r,n=u(e,f);if(n){if(void 0===t&&(t="default"),r=i(n,e,t),!o(r)||a(r))return r;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(e,t)}},9310:function(e,t,r){var n=r(2066),i=r(9395);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},1601:function(e,t,r){var n={};n[r(95)("toStringTag")]="z",e.exports="[object z]"===String(n)},3326:function(e,t,r){var n=r(9859),i=r(1589),o=n.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},9821:function(e,t,r){var n=r(9859).String;e.exports=function(e){try{return n(e)}catch(e){return"Object"}}},1441:function(e,t,r){var n=r(5968),i=0,o=Math.random(),a=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},6969:function(e,t,r){var n=r(3839);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7137:function(e,t,r){var n=r(7400),i=r(4229);e.exports=n&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},5391:function(e,t,r){var n=r(95);t.f=n},95:function(e,t,r){var n=r(9859),i=r(3036),o=r(8270),a=r(1441),u=r(3839),c=r(6969),s=i("wks"),l=n.Symbol,f=l&&l.for,p=c?l:l&&l.withoutSetter||a;e.exports=function(e){if(!o(s,e)||!u&&"string"!=typeof s[e]){var t="Symbol."+e;u&&o(l,e)?s[e]=l[e]:s[e]=c&&f?f(t):p(t)}return s[e]}},3949:function(e,t,r){"use strict";var n=r(1333),i=r(8270),o=r(5762),a=r(1321),u=r(6540),c=r(7081),s=r(835),l=r(635),f=r(9679),p=r(1590),d=r(373),v=r(4231);e.exports=function(e,t,r,h){var y=h?2:1,g=e.split("."),_=g[g.length-1],S=n.apply(null,g);if(S){var b=S.prototype;if(!v&&i(b,"cause")&&delete b.cause,!r)return S;var m=n("Error"),O=t((function(e,t){var r=l(h?t:e,void 0),n=h?new S(e):new S;return void 0!==r&&o(n,"message",r),d&&o(n,"stack",p(n.stack,2)),this&&a(b,this)&&s(n,this,O),arguments.length>y&&f(n,arguments[y]),n}));if(O.prototype=b,"Error"!==_&&(u?u(O,m):c(O,m,{name:!0})),c(O,S),!v)try{b.name!==_&&o(b,"name",_),b.constructor=O}catch(e){}return O}}},8178:function(e,t,r){"use strict";var n=r(3103),i=r(9859),o=r(4229),a=r(3718),u=r(5052),c=r(2991),s=r(9646),l=r(2324),f=r(7501),p=r(1460),d=r(95),v=r(6358),h=d("isConcatSpreadable"),y=9007199254740991,g="Maximum allowed index exceeded",_=i.TypeError,S=v>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),b=p("concat"),m=function(e){if(!u(e))return!1;var t=e[h];return void 0!==t?!!t:a(e)};n({target:"Array",proto:!0,forced:!S||!b},{concat:function(e){var t,r,n,i,o,a=c(this),u=f(a,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(m(o=-1===t?a:arguments[t])){if(p+(i=s(o))>y)throw _(g);for(r=0;r<i;r++,p++)r in o&&l(u,p,o[r])}else{if(p>=y)throw _(g);l(u,p++,o)}return u.length=p,u}})},5342:function(e,t,r){"use strict";var n=r(3103),i=r(9996).filter;n({target:"Array",proto:!0,forced:!r(1460)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},8695:function(e,t,r){"use strict";var n=r(3103),i=r(6570);n({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},7233:function(e,t,r){var n=r(3103),i=r(507);n({target:"Array",stat:!0,forced:!r(4575)((function(e){Array.from(e)}))},{from:i})},8145:function(e,t,r){r(3103)({target:"Array",stat:!0},{isArray:r(3718)})},5735:function(e,t,r){"use strict";var n=r(905),i=r(9736),o=r(5495),a=r(6407),u=r(1787).f,c=r(7675),s=r(4231),l=r(7400),f="Array Iterator",p=a.set,d=a.getterFor(f);e.exports=c(Array,"Array",(function(e,t){p(this,{type:f,target:n(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values");var v=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!s&&l&&"values"!==v.name)try{u(v,"name",{value:"values"})}catch(e){}},3450:function(e,t,r){"use strict";var n=r(3103),i=r(9996).map;n({target:"Array",proto:!0,forced:!r(1460)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},3108:function(e,t,r){"use strict";var n=r(3103),i=r(3143).left,o=r(6038),a=r(6358),u=r(8801);n({target:"Array",proto:!0,forced:!o("reduce")||!u&&a>79&&a<83},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},5713:function(e,t,r){var n=r(3103),i=r(6966);n({target:"Date",proto:!0,forced:Date.prototype.toISOString!==i},{toISOString:i})},9120:function(e,t,r){var n=r(5968),i=r(7487),o=Date.prototype,a="Invalid Date",u=n(o.toString),c=n(o.getTime);String(new Date(NaN))!=a&&i(o,"toString",(function(){var e=c(this);return e==e?u(this):a}))},1372:function(e,t,r){var n=r(3103),i=r(9859),o=r(3171),a=r(3949),u=i.WebAssembly,c=7!==Error("e",{cause:7}).cause,s=function(e,t){var r={};r[e]=a(e,t,c),n({global:!0,forced:c},r)},l=function(e,t){if(u&&u[e]){var r={};r[e]=a("WebAssembly."+e,t,c),n({target:"WebAssembly",stat:!0,forced:c},r)}};s("Error",(function(e){return function(t){return o(e,this,arguments)}})),s("EvalError",(function(e){return function(t){return o(e,this,arguments)}})),s("RangeError",(function(e){return function(t){return o(e,this,arguments)}})),s("ReferenceError",(function(e){return function(t){return o(e,this,arguments)}})),s("SyntaxError",(function(e){return function(t){return o(e,this,arguments)}})),s("TypeError",(function(e){return function(t){return o(e,this,arguments)}})),s("URIError",(function(e){return function(t){return o(e,this,arguments)}})),l("CompileError",(function(e){return function(t){return o(e,this,arguments)}})),l("LinkError",(function(e){return function(t){return o(e,this,arguments)}})),l("RuntimeError",(function(e){return function(t){return o(e,this,arguments)}}))},2147:function(e,t,r){var n=r(7487),i=r(8864),o=Error.prototype;o.toString!==i&&n(o,"toString",i)},6710:function(e,t,r){var n=r(3103),i=r(9859),o=r(1333),a=r(3171),u=r(5968),c=r(4229),s=i.Array,l=o("JSON","stringify"),f=u(/./.exec),p=u("".charAt),d=u("".charCodeAt),v=u("".replace),h=u(1..toString),y=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,S=function(e,t,r){var n=p(r,t-1),i=p(r,t+1);return f(g,e)&&!f(_,i)||f(_,e)&&!f(g,n)?"\\u"+h(d(e,0),16):e},b=c((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&n({target:"JSON",stat:!0,forced:b},{stringify:function(e,t,r){for(var n=0,i=arguments.length,o=s(i);n<i;n++)o[n]=arguments[n];var u=a(l,null,o);return"string"==typeof u?v(u,y,S):u}})},6555:function(e,t,r){var n=r(3103),i=r(7400),o=r(219).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==o,sham:!i},{defineProperties:o})},5094:function(e,t,r){var n=r(3103),i=r(7400),o=r(1787).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!i},{defineProperty:o})},8625:function(e,t,r){var n=r(3103),i=r(4229),o=r(905),a=r(7933).f,u=r(7400),c=i((function(){a(1)}));n({target:"Object",stat:!0,forced:!u||c,sham:!u},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},2775:function(e,t,r){var n=r(3103),i=r(7400),o=r(4826),a=r(905),u=r(7933),c=r(2324);n({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,r,n=a(e),i=u.f,s=o(n),l={},f=0;s.length>f;)void 0!==(r=i(n,t=s[f++]))&&c(l,t,r);return l}})},4769:function(e,t,r){var n=r(3103),i=r(2991),o=r(5632);n({target:"Object",stat:!0,forced:r(4229)((function(){o(1)}))},{keys:function(e){return o(i(e))}})},8188:function(e,t,r){var n=r(1601),i=r(7487),o=r(4059);n||i(Object.prototype,"toString",o,{unsafe:!0})},3244:function(e,t,r){"use strict";r(9789)("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r(8081))},8673:function(e,t,r){"use strict";var n=r(966).charAt,i=r(3326),o=r(6407),a=r(7675),u="String Iterator",c=o.set,s=o.getterFor(u);a(String,"String",(function(e){c(this,{type:u,string:i(e),index:0})}),(function(){var e,t=s(this),r=t.string,i=t.index;return i>=r.length?{value:void 0,done:!0}:(e=n(r,i),t.index+=e.length,{value:e,done:!1})}))},4115:function(e,t,r){"use strict";var n=r(3103),i=r(9859),o=r(1333),a=r(3171),u=r(266),c=r(5968),s=r(4231),l=r(7400),f=r(3839),p=r(4229),d=r(8270),v=r(3718),h=r(6733),y=r(5052),g=r(1321),_=r(9395),S=r(1176),b=r(2991),m=r(905),O=r(9310),E=r(3326),T=r(5358),R=r(2391),w=r(5632),A=r(8151),P=r(166),N=r(894),k=r(7933),I=r(1787),x=r(219),j=r(9195),C=r(1909),U=r(7487),L=r(3036),B=r(4399),D=r(5977),F=r(1441),M=r(95),q=r(5391),G=r(8423),Y=r(4555),z=r(6407),V=r(9996).forEach,H=B("hidden"),Q="Symbol",J=M("toPrimitive"),W=z.set,K=z.getterFor(Q),X=Object.prototype,$=i.Symbol,Z=$&&$.prototype,ee=i.TypeError,te=i.QObject,re=o("JSON","stringify"),ne=k.f,ie=I.f,oe=P.f,ae=j.f,ue=c([].push),ce=L("symbols"),se=L("op-symbols"),le=L("string-to-symbol-registry"),fe=L("symbol-to-string-registry"),pe=L("wks"),de=!te||!te.prototype||!te.prototype.findChild,ve=l&&p((function(){return 7!=R(ie({},"a",{get:function(){return ie(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=ne(X,t);n&&delete X[t],ie(e,t,r),n&&e!==X&&ie(X,t,n)}:ie,he=function(e,t){var r=ce[e]=R(Z);return W(r,{type:Q,tag:e,description:t}),l||(r.description=t),r},ye=function(e,t,r){e===X&&ye(se,t,r),S(e);var n=O(t);return S(r),d(ce,n)?(r.enumerable?(d(e,H)&&e[H][n]&&(e[H][n]=!1),r=R(r,{enumerable:T(0,!1)})):(d(e,H)||ie(e,H,T(1,{})),e[H][n]=!0),ve(e,n,r)):ie(e,n,r)},ge=function(e,t){S(e);var r=m(t),n=w(r).concat(me(r));return V(n,(function(t){l&&!u(_e,r,t)||ye(e,t,r[t])})),e},_e=function(e){var t=O(e),r=u(ae,this,t);return!(this===X&&d(ce,t)&&!d(se,t))&&(!(r||!d(this,t)||!d(ce,t)||d(this,H)&&this[H][t])||r)},Se=function(e,t){var r=m(e),n=O(t);if(r!==X||!d(ce,n)||d(se,n)){var i=ne(r,n);return!i||!d(ce,n)||d(r,H)&&r[H][n]||(i.enumerable=!0),i}},be=function(e){var t=oe(m(e)),r=[];return V(t,(function(e){d(ce,e)||d(D,e)||ue(r,e)})),r},me=function(e){var t=e===X,r=oe(t?se:m(e)),n=[];return V(r,(function(e){!d(ce,e)||t&&!d(X,e)||ue(n,ce[e])})),n};if(f||($=function(){if(g(Z,this))throw ee("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?E(arguments[0]):void 0,t=F(e),r=function(e){this===X&&u(r,se,e),d(this,H)&&d(this[H],t)&&(this[H][t]=!1),ve(this,t,T(1,e))};return l&&de&&ve(X,t,{configurable:!0,set:r}),he(t,e)},U(Z=$.prototype,"toString",(function(){return K(this).tag})),U($,"withoutSetter",(function(e){return he(F(e),e)})),j.f=_e,I.f=ye,x.f=ge,k.f=Se,A.f=P.f=be,N.f=me,q.f=function(e){return he(M(e),e)},l&&(ie(Z,"description",{configurable:!0,get:function(){return K(this).description}}),s||U(X,"propertyIsEnumerable",_e,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:$}),V(w(pe),(function(e){G(e)})),n({target:Q,stat:!0,forced:!f},{for:function(e){var t=E(e);if(d(le,t))return le[t];var r=$(t);return le[t]=r,fe[r]=t,r},keyFor:function(e){if(!_(e))throw ee(e+" is not a symbol");if(d(fe,e))return fe[e]},useSetter:function(){de=!0},useSimple:function(){de=!1}}),n({target:"Object",stat:!0,forced:!f,sham:!l},{create:function(e,t){return void 0===t?R(e):ge(R(e),t)},defineProperty:ye,defineProperties:ge,getOwnPropertyDescriptor:Se}),n({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:be,getOwnPropertySymbols:me}),n({target:"Object",stat:!0,forced:p((function(){N.f(1)}))},{getOwnPropertySymbols:function(e){return N.f(b(e))}}),re&&n({target:"JSON",stat:!0,forced:!f||p((function(){var e=$();return"[null]"!=re([e])||"{}"!=re({a:e})||"{}"!=re(Object(e))}))},{stringify:function(e,t,r){var n=C(arguments),i=t;if((y(t)||void 0!==e)&&!_(e))return v(t)||(t=function(e,t){if(h(i)&&(t=u(i,this,e,t)),!_(t))return t}),n[1]=t,a(re,null,n)}}),!Z[J]){var Oe=Z.valueOf;U(Z,J,(function(e){return u(Oe,this)}))}Y($,Q),D[H]=!0},2356:function(e,t,r){"use strict";var n,i=r(9859),o=r(5968),a=r(8787),u=r(5926),c=r(9789),s=r(3370),l=r(5052),f=r(5343),p=r(6407).enforce,d=r(8694),v=!i.ActiveXObject&&"ActiveXObject"in i,h=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},y=c("WeakMap",h,s);if(d&&v){n=s.getConstructor(h,"WeakMap",!0),u.enable();var g=y.prototype,_=o(g.delete),S=o(g.has),b=o(g.get),m=o(g.set);a(g,{delete:function(e){if(l(e)&&!f(e)){var t=p(this);return t.frozen||(t.frozen=new n),_(this,e)||t.frozen.delete(e)}return _(this,e)},has:function(e){if(l(e)&&!f(e)){var t=p(this);return t.frozen||(t.frozen=new n),S(this,e)||t.frozen.has(e)}return S(this,e)},get:function(e){if(l(e)&&!f(e)){var t=p(this);return t.frozen||(t.frozen=new n),S(this,e)?b(this,e):t.frozen.get(e)}return b(this,e)},set:function(e,t){if(l(e)&&!f(e)){var r=p(this);r.frozen||(r.frozen=new n),S(this,e)?m(this,e,t):r.frozen.set(e,t)}else m(this,e,t);return this}})}},5682:function(e,t,r){"use strict";r(3103)({target:"Set",proto:!0,real:!0,forced:r(4231)},{addAll:r(3953)})},1045:function(e,t,r){"use strict";r(3103)({target:"Set",proto:!0,real:!0,forced:r(4231)},{deleteAll:r(1250)})},7244:function(e,t,r){"use strict";var n=r(4231),i=r(3103),o=r(1333),a=r(266),u=r(7111),c=r(1176),s=r(7942),l=r(9003);i({target:"Set",proto:!0,real:!0,forced:n},{difference:function(e){var t=c(this),r=new(s(t,o("Set")))(t),n=u(r.delete);return l(e,(function(e){a(n,r,e)})),r}})},2068:function(e,t,r){"use strict";var n=r(3103),i=r(4231),o=r(1176),a=r(7636),u=r(3817),c=r(9003);n({target:"Set",proto:!0,real:!0,forced:i},{every:function(e){var t=o(this),r=u(t),n=a(e,arguments.length>1?arguments[1]:void 0);return!c(r,(function(e,r){if(!n(e,e,t))return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},5519:function(e,t,r){"use strict";var n=r(4231),i=r(3103),o=r(1333),a=r(266),u=r(7111),c=r(1176),s=r(7636),l=r(7942),f=r(3817),p=r(9003);i({target:"Set",proto:!0,real:!0,forced:n},{filter:function(e){var t=c(this),r=f(t),n=s(e,arguments.length>1?arguments[1]:void 0),i=new(l(t,o("Set"))),d=u(i.add);return p(r,(function(e){n(e,e,t)&&a(d,i,e)}),{IS_ITERATOR:!0}),i}})},9432:function(e,t,r){"use strict";var n=r(3103),i=r(4231),o=r(1176),a=r(7636),u=r(3817),c=r(9003);n({target:"Set",proto:!0,real:!0,forced:i},{find:function(e){var t=o(this),r=u(t),n=a(e,arguments.length>1?arguments[1]:void 0);return c(r,(function(e,r){if(n(e,e,t))return r(e)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},8897:function(e,t,r){r(3103)({target:"Set",stat:!0},{from:r(4387)})},3574:function(e,t,r){"use strict";var n=r(4231),i=r(3103),o=r(1333),a=r(266),u=r(7111),c=r(1176),s=r(7942),l=r(9003);i({target:"Set",proto:!0,real:!0,forced:n},{intersection:function(e){var t=c(this),r=new(s(t,o("Set"))),n=u(t.has),i=u(r.add);return l(e,(function(e){a(n,t,e)&&a(i,r,e)})),r}})},3619:function(e,t,r){"use strict";var n=r(4231),i=r(3103),o=r(266),a=r(7111),u=r(1176),c=r(9003);i({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:function(e){var t=u(this),r=a(t.has);return!c(e,(function(e,n){if(!0===o(r,t,e))return n()}),{INTERRUPTED:!0}).stopped}})},3862:function(e,t,r){"use strict";var n=r(4231),i=r(3103),o=r(1333),a=r(266),u=r(7111),c=r(6733),s=r(1176),l=r(8403),f=r(9003);i({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:function(e){var t=l(this),r=s(e),n=r.has;return c(n)||(r=new(o("Set"))(e),n=u(r.has)),!f(t,(function(e,t){if(!1===a(n,r,e))return t()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},6881:function(e,t,r){"use strict";var n=r(4231),i=r(3103),o=r(266),a=r(7111),u=r(1176),c=r(9003);i({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:function(e){var t=u(this),r=a(t.has);return!c(e,(function(e,n){if(!1===o(r,t,e))return n()}),{INTERRUPTED:!0}).stopped}})},5359:function(e,t,r){"use strict";var n=r(4231),i=r(3103),o=r(5968),a=r(1176),u=r(3326),c=r(3817),s=r(9003),l=o([].join),f=[].push;i({target:"Set",proto:!0,real:!0,forced:n},{join:function(e){var t=a(this),r=c(t),n=void 0===e?",":u(e),i=[];return s(r,f,{that:i,IS_ITERATOR:!0}),l(i,n)}})},8208:function(e,t,r){"use strict";var n=r(4231),i=r(3103),o=r(1333),a=r(7636),u=r(266),c=r(7111),s=r(1176),l=r(7942),f=r(3817),p=r(9003);i({target:"Set",proto:!0,real:!0,forced:n},{map:function(e){var t=s(this),r=f(t),n=a(e,arguments.length>1?arguments[1]:void 0),i=new(l(t,o("Set"))),d=c(i.add);return p(r,(function(e){u(d,i,n(e,e,t))}),{IS_ITERATOR:!0}),i}})},1873:function(e,t,r){r(3103)({target:"Set",stat:!0},{of:r(5777)})},3608:function(e,t,r){"use strict";var n=r(3103),i=r(9859),o=r(4231),a=r(7111),u=r(1176),c=r(3817),s=r(9003),l=i.TypeError;n({target:"Set",proto:!0,real:!0,forced:o},{reduce:function(e){var t=u(this),r=c(t),n=arguments.length<2,i=n?void 0:arguments[1];if(a(e),s(r,(function(r){n?(n=!1,i=r):i=e(i,r,r,t)}),{IS_ITERATOR:!0}),n)throw l("Reduce of empty set with no initial value");return i}})},5676:function(e,t,r){"use strict";var n=r(3103),i=r(4231),o=r(1176),a=r(7636),u=r(3817),c=r(9003);n({target:"Set",proto:!0,real:!0,forced:i},{some:function(e){var t=o(this),r=u(t),n=a(e,arguments.length>1?arguments[1]:void 0);return c(r,(function(e,r){if(n(e,e,t))return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},5993:function(e,t,r){"use strict";var n=r(4231),i=r(3103),o=r(1333),a=r(266),u=r(7111),c=r(1176),s=r(7942),l=r(9003);i({target:"Set",proto:!0,real:!0,forced:n},{symmetricDifference:function(e){var t=c(this),r=new(s(t,o("Set")))(t),n=u(r.delete),i=u(r.add);return l(e,(function(e){a(n,r,e)||a(i,r,e)})),r}})},4456:function(e,t,r){"use strict";var n=r(3103),i=r(4231),o=r(1333),a=r(7111),u=r(1176),c=r(7942),s=r(9003);n({target:"Set",proto:!0,real:!0,forced:i},{union:function(e){var t=u(this),r=new(c(t,o("Set")))(t);return s(e,a(r.add),{that:r}),r}})},7236:function(e,t,r){"use strict";r(3103)({target:"WeakMap",proto:!0,real:!0,forced:r(4231)},{deleteAll:r(1250)})},3331:function(e,t,r){"use strict";r(3103)({target:"WeakMap",proto:!0,real:!0,forced:r(4231)},{emplace:r(869)})},2938:function(e,t,r){r(3103)({target:"WeakMap",stat:!0},{from:r(4387)})},8685:function(e,t,r){r(3103)({target:"WeakMap",stat:!0},{of:r(5777)})},1712:function(e,t,r){"use strict";r(3103)({target:"WeakMap",proto:!0,real:!0,forced:r(4231)},{upsert:r(8185)})},1939:function(e,t,r){var n=r(9859),i=r(5694),o=r(8865),a=r(6570),u=r(5762),c=function(e){if(e&&e.forEach!==a)try{u(e,"forEach",a)}catch(t){e.forEach=a}};for(var s in i)i[s]&&c(n[s]&&n[s].prototype);c(o)},6886:function(e,t,r){var n=r(9859),i=r(5694),o=r(8865),a=r(5735),u=r(5762),c=r(95),s=c("iterator"),l=c("toStringTag"),f=a.values,p=function(e,t){if(e){if(e[s]!==f)try{u(e,s,f)}catch(t){e[s]=f}if(e[l]||u(e,l,t),i[t])for(var r in a)if(e[r]!==a[r])try{u(e,r,a[r])}catch(t){e[r]=a[r]}}};for(var d in i)p(n[d]&&n[d].prototype,d);p(o,"DOMTokenList")},9:function(e,t,r){var n=r(5529);r(6886),e.exports=n},251:function(e,t,r){var n=r(1647);r(6886),e.exports=n},5047:function(e){var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new P(n||[]);return o._invoke=function(e,t,r){var n=f;return function(i,o){if(n===d)throw new Error("Generator is already running");if(n===v){if("throw"===i)throw o;return k()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=R(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var c=l(e,t,r);if("normal"===c.type){if(n=r.done?v:p,c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=v,r.method="throw",r.arg=c.arg)}}}(e,r,a),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",h={};function y(){}function g(){}function _(){}var S={};c(S,o,(function(){return this}));var b=Object.getPrototypeOf,m=b&&b(b(N([])));m&&m!==r&&n.call(m,o)&&(S=m);var O=_.prototype=y.prototype=Object.create(S);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(i,o,a,u){var c=l(e[i],e,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,u)}),(function(e){r("throw",e,a,u)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,u)}))}u(c.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=l(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function N(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:k}}function k(){return{value:t,done:!0}}return g.prototype=_,c(O,"constructor",_),c(_,"constructor",g),g.displayName=c(_,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},E(T.prototype),c(T.prototype,a,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new T(s(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(O),c(O,u,"Generator"),c(O,o,(function(){return this})),c(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=N,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return u.type="throw",u.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},1674:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContract=void 0;var o=r(5285),a=r(3732);t.AsyncContract=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length-1,u=e.slice(0,r),c=e[r];return{enforce:function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length<u.length){var s="Expected "+u.length+" arguments but only received "+t.length,l=a.FAILURE.ARGUMENT_INCORRECT(s);throw new o.ValidationError(l)}for(var f=0;f<u.length;f++)u[f].check(t[f]);var p=e.apply(void 0,i([],n(t)));if(!(p instanceof Promise))throw s="Expected function to return a promise, but instead got "+p,l=a.FAILURE.RETURN_INCORRECT(s),new o.ValidationError(l);return p.then(c.check)}}}}},5097:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Contract=void 0;var o=r(5285),a=r(3732);t.Contract=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length-1,u=e.slice(0,r),c=e[r];return{enforce:function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length<u.length){var s="Expected "+u.length+" arguments but only received "+t.length,l=a.FAILURE.ARGUMENT_INCORRECT(s);throw new o.ValidationError(l)}for(var f=0;f<u.length;f++)u[f].check(t[f]);return c.check(e.apply(void 0,i([],n(t))))}}}}},2857:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checked=t.check=void 0;var n=r(5285),i=r(3732),o=new WeakMap;function a(e,t,r){var n=o.get(e),i=n&&n.get(t);if(i)return i;for(var a=[],u=0;u<r;u++)a.push(u);return a}t.check=function(e,t,r){var n=o.get(e)||new Map;o.set(e,n);var i=n.get(t)||[];n.set(t,i),i.push(r)},t.checked=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("No runtype provided to `@checked`. Please remove the decorator.");return function(t,r,o){var u=o.value,c=(t.name||t.constructor.name+".prototype")+("string"==typeof r?'["'+r+'"]':"["+String(r)+"]"),s=a(t,r,e.length);if(s.length!==e.length)throw new Error("Number of `@checked` runtypes and @check parameters not matched.");if(s.length>u.length)throw new Error("Number of `@checked` runtypes exceeds actual parameter length.");o.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.forEach((function(e,r){var o=s[r],a=e.validate(t[o]);if(!a.success){var u=c+", argument #"+o+": "+a.message,l=i.FAILURE.ARGUMENT_INCORRECT(u);throw new n.ValidationError(l)}})),u.apply(this,t)}}}},5285:function(e,t){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationError=void 0;var i=function(e){function t(r){var n=e.call(this,r.message)||this;return n.name="ValidationError",n.code=r.code,void 0!==r.details&&(n.details=r.details),Object.setPrototypeOf(n,t.prototype),n}return n(t,e),t}(Error);t.ValidationError=i},187:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceOf=t.Nullish=t.Null=t.Undefined=t.Literal=void 0,i(r(1914),t),i(r(6734),t),i(r(5097),t),i(r(1674),t),i(r(3026),t),i(r(5285),t),i(r(1006),t),i(r(8868),t),i(r(2002),t);var o=r(9184);Object.defineProperty(t,"Literal",{enumerable:!0,get:function(){return o.Literal}}),Object.defineProperty(t,"Undefined",{enumerable:!0,get:function(){return o.Undefined}}),Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return o.Null}}),Object.defineProperty(t,"Nullish",{enumerable:!0,get:function(){return o.Nullish}}),i(r(6224),t),i(r(5664),t),i(r(5452),t),i(r(6790),t),i(r(8978),t),i(r(8147),t),i(r(3634),t),i(r(4533),t),i(r(6687),t),i(r(2684),t),i(r(6418),t),i(r(7446),t),i(r(4107),t),i(r(4510),t);var a=r(5191);Object.defineProperty(t,"InstanceOf",{enumerable:!0,get:function(){return a.InstanceOf}}),i(r(5001),t),i(r(562),t),i(r(1499),t),i(r(2857),t)},3026:function(e,t){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.when=t.match=void 0,t.match=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var i,o;try{for(var a=r(e),u=a.next();!u.done;u=a.next()){var c=n(u.value,2),s=c[0],l=c[1];if(s.guard(t))return l(t)}}catch(e){i={error:e}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}throw new Error("No alternatives were matched")}},t.when=function(e,t){return[e,t]}},1914:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6734:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Failcode=void 0,t.Failcode={TYPE_INCORRECT:"TYPE_INCORRECT",VALUE_INCORRECT:"VALUE_INCORRECT",KEY_INCORRECT:"KEY_INCORRECT",CONTENT_INCORRECT:"CONTENT_INCORRECT",ARGUMENT_INCORRECT:"ARGUMENT_INCORRECT",RETURN_INCORRECT:"RETURN_INCORRECT",CONSTRAINT_FAILED:"CONSTRAINT_FAILED",PROPERTY_MISSING:"PROPERTY_MISSING",PROPERTY_PRESENT:"PROPERTY_PRESENT",NOTHING_EXPECTED:"NOTHING_EXPECTED"}},8200:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.innerValidate=t.create=t.isRuntype=void 0;var n=r(187),i=r(2973),o=r(5285),a=r(3732),u=Symbol();t.isRuntype=function(e){return a.hasKey(u,e)},t.create=function(e,t){return t[u]=!0,t.check=r,t.assert=r,t._innerValidate=function(r,n){return n.has(r,t)?a.SUCCESS(r):e(r,n)},t.validate=function(e){return t._innerValidate(e,(r=new WeakMap,n=function(e,t){if(null!==e&&"object"==typeof e){var n=r.get(e);r.set(e,n?n.set(t,!0):(new WeakMap).set(t,!0))}},i=function(e,t){var i=r.get(e),o=i&&i.get(t)||!1;return n(e,t),o},{has:i}));var r,n,i},t.guard=function(e){return t.validate(e).success},t.Or=function(e){return n.Union(t,e)},t.And=function(e){return n.Intersect(t,e)},t.optional=function(){return n.Optional(t)},t.nullable=function(){return n.Union(t,n.Null)},t.withConstraint=function(e,r){return n.Constraint(t,e,r)},t.withGuard=function(e,r){return n.Constraint(t,e,r)},t.withBrand=function(e){return n.Brand(e,t)},t.reflect=t,t.toString=function(){return"Runtype<"+i.default(t)+">"},t;function r(e){var r=t.validate(e);if(r.success)return r.value;throw new o.ValidationError(r)}},t.innerValidate=function(e,t,r){return e._innerValidate(t,r)}},2973:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return function(t){switch(t.tag){case"literal":return'"'+String(t.value)+'"';case"string":return"string";case"brand":return t.brand;case"constraint":return t.name||r(e)(t.underlying);case"union":return t.alternatives.map(r(e)).join(" | ");case"intersect":return t.intersectees.map(r(e)).join(" & ")}return"`${"+i(!1,e)(t)+"}`"}},n=function(e){return function(t){switch(t.tag){case"literal":return String(t.value);case"brand":return"${"+t.brand+"}";case"constraint":return t.name?"${"+t.name+"}":n(e)(t.underlying);case"union":if(1===t.alternatives.length){var r=t.alternatives[0];return n(e)(r.reflect)}break;case"intersect":if(1===t.intersectees.length)return r=t.intersectees[0],n(e)(r.reflect)}return"${"+i(!1,e)(t)+"}"}},i=function(e,t){return function(a){var u=function(t){return e?"("+t+")":t};if(t.has(a))return u("CIRCULAR "+a.tag);t.add(a);try{switch(a.tag){case"unknown":case"never":case"void":case"boolean":case"number":case"bigint":case"string":case"symbol":case"function":return a.tag;case"literal":var c=a.value;return"string"==typeof c?'"'+c+'"':String(c);case"template":if(0===a.strings.length)return'""';if(1===a.strings.length)return'"'+a.strings[0]+'"';if(2===a.strings.length&&a.strings.every((function(e){return""===e}))){var s=a.runtypes[0];return r(t)(s.reflect)}var l=!1,f=a.strings.reduce((function(e,r,i){var o=e+r,u=a.runtypes[i];if(u){var c=n(t)(u.reflect);return!l&&c.startsWith("$")&&(l=!0),o+c}return o}),"");return l?"`"+f+"`":'"'+f+'"';case"array":return""+o(a)+i(!0,t)(a.element)+"[]";case"dictionary":return"{ [_: "+a.key+"]: "+i(!1,t)(a.value)+" }";case"record":var p=Object.keys(a.fields);return p.length?"{ "+p.map((function(e){return""+o(a)+e+(n=e,u=(r=a).isPartial,c=r.fields,(u||void 0!==n&&"optional"===c[n].tag?"?":"")+": ")+("optional"===a.fields[e].tag?i(!1,t)(a.fields[e].underlying):i(!1,t)(a.fields[e]))+";";var r,n,u,c})).join(" ")+" }":"{}";case"tuple":return"["+a.components.map(i(!1,t)).join(", ")+"]";case"union":return u(""+a.alternatives.map(i(!0,t)).join(" | "));case"intersect":return u(""+a.intersectees.map(i(!0,t)).join(" & "));case"optional":return i(e,t)(a.underlying)+" | undefined";case"constraint":return a.name||i(e,t)(a.underlying);case"instanceof":return a.ctor.name;case"brand":return i(e,t)(a.entity)}}finally{t.delete(a)}throw Error("impossible")}};function o(e){return e.isReadonly?"readonly ":""}t.default=i(!1,new Set)},3634:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Array=void 0;var n=r(8200),i=r(3732);function o(e,t){var r,a={tag:"array",isReadonly:t,element:e};return(r=n.create((function(t,r){if(!Array.isArray(t))return i.FAILURE.TYPE_INCORRECT(a,t);var o=i.enumerableKeysOf(t),u=o.map((function(i){return n.innerValidate(e,t[i],r)})),c=o.reduce((function(e,t){var r=u[t];return r.success||(e[t]=r.details||r.message),e}),[]);return 0!==i.enumerableKeysOf(c).length?i.FAILURE.CONTENT_INCORRECT(a,c):i.SUCCESS(t)}),a)).asReadonly=function(){return o(r.element,!0)},r}t.Array=function(e){return o(e,!1)}},6790:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BigInt=void 0;var n=r(8200),i=r(3732),o={tag:"bigint"};t.BigInt=n.create((function(e){return"bigint"==typeof e?i.SUCCESS(e):i.FAILURE.TYPE_INCORRECT(o,e)}),o)},5664:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Boolean=void 0;var n=r(8200),i=r(3732),o={tag:"boolean"};t.Boolean=n.create((function(e){return"boolean"==typeof e?i.SUCCESS(e):i.FAILURE.TYPE_INCORRECT(o,e)}),o)},1499:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Brand=void 0;var n=r(8200);t.Brand=function(e,t){var r={tag:"brand",brand:e,entity:t};return n.create((function(e){return t.validate(e)}),r)}},562:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Guard=t.Constraint=void 0;var n=r(8200),i=r(3732),o=r(1006);t.Constraint=function(e,t,r){var o=r&&r.name,a=r&&r.args,u={tag:"constraint",underlying:e,constraint:t,name:o,args:a};return n.create((function(r){var n=e.validate(r);if(!n.success)return n;var o=t(n.value);return"string"==typeof o?i.FAILURE.CONSTRAINT_FAILED(u,o):o?i.SUCCESS(n.value):i.FAILURE.CONSTRAINT_FAILED(u)}),u)},t.Guard=function(e,t){return o.Unknown.withGuard(e,t)}},2684:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dictionary=void 0;var n=r(8200),i=r(8978),o=r(562),a=r(2973),u=r(3732),c=o.Constraint(i.String,(function(e){return!isNaN(+e)}),{name:"number"});t.Dictionary=function(e,t){var r=void 0===t||"string"===t?i.String:"number"===t?c:t,o=a.default(r),s={tag:"dictionary",key:o,value:e};return n.create((function(t,i){if(null==t||"object"!=typeof t)return u.FAILURE.TYPE_INCORRECT(s,t);if(Object.getPrototypeOf(t)!==Object.prototype&&(!Array.isArray(t)||"string"===o))return u.FAILURE.TYPE_INCORRECT(s,t);var a=/^(?:NaN|-?\d+(?:\.\d+)?)$/,c=u.enumerableKeysOf(t),l=c.reduce((function(o,c){var l="string"==typeof c&&a.test(c),f=l?globalThis.Number(c):c;return(l?r.guard(f)||r.guard(c):r.guard(f))?o[c]=n.innerValidate(e,t[c],i):o[c]=u.FAILURE.KEY_INCORRECT(s,r.reflect,f),o}),{}),f=c.reduce((function(e,t){var r=l[t];return r.success||(e[t]=r.details||r.message),e}),{});return 0!==u.enumerableKeysOf(f).length?u.FAILURE.CONTENT_INCORRECT(s,f):u.SUCCESS(t)}),s)}},4510:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Function=void 0;var n=r(8200),i=r(3732),o={tag:"function"};t.Function=n.create((function(e){return"function"==typeof e?i.SUCCESS(e):i.FAILURE.TYPE_INCORRECT(o,e)}),o)},5191:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceOf=void 0;var n=r(8200),i=r(3732);t.InstanceOf=function(e){var t={tag:"instanceof",ctor:e};return n.create((function(r){return r instanceof e?i.SUCCESS(r):i.FAILURE.TYPE_INCORRECT(t,r)}),t)}},7446:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Intersect=void 0;var i=r(8200),o=r(3732);t.Intersect=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={tag:"intersect",intersectees:e};return i.create((function(t,r){var a,u;try{for(var c=n(e),s=c.next();!s.done;s=c.next()){var l=s.value,f=i.innerValidate(l,t,r);if(!f.success)return f}}catch(e){a={error:e}}finally{try{s&&!s.done&&(u=c.return)&&u.call(c)}finally{if(a)throw a.error}}return o.SUCCESS(t)}),r)}},5001:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lazy=void 0;var n=r(8200);t.Lazy=function(e){var t,r={get tag(){return i().tag}};function i(){if(!t)for(var n in t=e())"tag"!==n&&(r[n]=t[n]);return t}return n.create((function(e){return i().validate(e)}),r)}},9184:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Nullish=t.Null=t.Undefined=t.Literal=t.literal=void 0;var n=r(8200),i=r(3732),o=r(6418);function a(e){return Array.isArray(e)?String(e.map(String)):"bigint"==typeof e?String(e)+"n":String(e)}function u(e){var t={tag:"literal",value:e};return n.create((function(t){return t===e?i.SUCCESS(t):i.FAILURE.VALUE_INCORRECT("literal","`"+a(e)+"`","`"+a(t)+"`")}),t)}t.literal=a,t.Literal=u,t.Undefined=u(void 0),t.Null=u(null),t.Nullish=o.Union(t.Null,t.Undefined)},8868:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Never=void 0;var n=r(8200),i=r(3732);t.Never=n.create(i.FAILURE.NOTHING_EXPECTED,{tag:"never"})},5452:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Number=void 0;var n=r(8200),i=r(3732),o={tag:"number"};t.Number=n.create((function(e){return"number"==typeof e?i.SUCCESS(e):i.FAILURE.TYPE_INCORRECT(o,e)}),o)},4107:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Optional=void 0;var n=r(8200),i=r(3732);t.Optional=function(e){var t={tag:"optional",underlying:e};return n.create((function(t){return void 0===t?i.SUCCESS(t):e.validate(t)}),t)}},6687:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Partial=t.Record=t.InternalRecord=void 0;var o=r(8200),a=r(3732);function u(e,t,r){var c,s={tag:"record",isPartial:t,isReadonly:r,fields:e};return(c=o.create((function(r,u){if(null==r)return a.FAILURE.TYPE_INCORRECT(s,r);var c=a.enumerableKeysOf(e);if(0!==c.length&&"object"!=typeof r)return a.FAILURE.TYPE_INCORRECT(s,r);var l=i([],n(new Set(i(i([],n(c)),n(a.enumerableKeysOf(r)))))),f=l.reduce((function(n,i){var c=a.hasKey(i,e),s=a.hasKey(i,r);if(c){var l=e[i],f=t||"optional"===l.reflect.tag;if(s){var p=r[i];n[i]=f&&void 0===p?a.SUCCESS(p):o.innerValidate(l,p,u)}else n[i]=f?a.SUCCESS(void 0):a.FAILURE.PROPERTY_MISSING(l.reflect)}else{if(!s)throw new Error("impossible");p=r[i],n[i]=a.SUCCESS(p)}return n}),{}),p=l.reduce((function(e,t){var r=f[t];return r.success||(e[t]=r.details||r.message),e}),{});return 0!==a.enumerableKeysOf(p).length?a.FAILURE.CONTENT_INCORRECT(s,p):a.SUCCESS(r)}),s)).asPartial=function(){return u(c.fields,!0,c.isReadonly)},c.asReadonly=function(){return u(c.fields,c.isPartial,!0)},c.pick=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={};return e.forEach((function(e){r[e]=c.fields[e]})),u(r,c.isPartial,c.isReadonly)},c.omit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={};return a.enumerableKeysOf(c.fields).forEach((function(t){e.includes(t)||(r[t]=c.fields[t])})),u(r,c.isPartial,c.isReadonly)},c.extend=function(e){return u(Object.assign({},c.fields,e),c.isPartial,c.isReadonly)},c}t.InternalRecord=u,t.Record=function(e){return u(e,!1,!1)},t.Partial=function(e){return u(e,!0,!1)}},8978:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.String=void 0;var n=r(8200),i=r(3732),o={tag:"string"};t.String=n.create((function(e){return"string"==typeof e?i.SUCCESS(e):i.FAILURE.TYPE_INCORRECT(o,e)}),o)},8147:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Symbol=void 0;var n=r(8200),i=r(3732),o={tag:"symbol"};t.Symbol=n.create((function(e){return"symbol"==typeof e?i.SUCCESS(e):i.FAILURE.TYPE_INCORRECT(o,e)}),Object.assign((function(e){var t={tag:"symbol",key:e};return n.create((function(r){if("symbol"!=typeof r)return i.FAILURE.TYPE_INCORRECT(t,r);var n=globalThis.Symbol.keyFor(r);return n!==e?i.FAILURE.VALUE_INCORRECT("symbol key",a(e),a(n)):i.SUCCESS(r)}),t)}),o));var a=function(e){return void 0===e?"undefined":'"'+e+'"'}},6224:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Template=void 0;var a=r(8200),u=r(2973),c=r(3732),s=r(9184),l=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},f=function(e){var t=n(function(e){if(0<e.length&&Array.isArray(e[0])){var t=n(e),r=t[0],i=t.slice(1);return[Array.from(r),i]}var o=e;return[r=o.reduce((function(e,t){return a.isRuntype(t)?e.push(""):e.push(e.pop()+String(t)),e}),[""]),i=o.filter(a.isRuntype)]}(e),2),r=t[0],o=t[1];return function(e,t){for(var r=0;r<t.length;)switch(t[r].reflect.tag){case"literal":var o=t[r];t.splice(r,1);var a=String(o.value);e.splice(r,2,e[r]+a+e[r+1]);break;case"template":var u=t[r];t.splice.apply(t,i([r,1],n(u.runtypes)));var c=u.strings;if(1===c.length)e.splice(r,2,e[r]+c[0]+e[r+1]);else{var s=c[0],l=c.slice(1,-1),f=c[c.length-1];e.splice.apply(e,i(i([r,2,e[r]+s],n(l)),[f+e[r+1]]))}break;case"union":var d=t[r];if(1!==d.alternatives.length){r++;break}try{var v=p(d);t.splice(r,1),a=String(v.value),e.splice(r,2,e[r]+a+e[r+1]);break}catch(e){r++;break}case"intersect":var h=t[r];if(1!==h.intersectees.length){r++;break}try{var y=p(h);t.splice(r,1),a=String(y.value),e.splice(r,2,e[r]+a+e[r+1]);break}catch(e){r++;break}default:r++}}(r,o),[r,o]},p=function(e){switch(e.reflect.tag){case"literal":return e;case"brand":return p(e.reflect.entity);case"union":if(1===e.reflect.alternatives.length)return p(e.reflect.alternatives[0]);break;case"intersect":if(1===e.reflect.intersectees.length)return p(e.reflect.intersectees[0])}throw void 0},d=function(e){return e},v={string:[function(e){return globalThis.String(e)},".*"],number:[function(e){return globalThis.Number(e)},"[+-]?(?:\\d*\\.\\d+|\\d+\\.\\d*|\\d+)(?:[Ee][+-]?\\d+)?","0[Bb][01]+","0[Oo][07]+","0[Xx][0-9A-Fa-f]+"],bigint:[function(e){return globalThis.BigInt(e)},"-?[1-9]d*"],boolean:[function(e){return"false"!==e},"true","false"],null:[function(){return null},"null"],undefined:[function(){},"undefined"]},h=function(e){switch(e.tag){case"literal":return n(v[c.typeOf(e.value)]||[d],1)[0];case"brand":return h(e.entity);case"constraint":return h(e.underlying);case"union":return e.alternatives.map(h);case"intersect":return e.intersectees.map(h);default:return n(v[e.tag]||[d],1)[0]}},y=function(e,t){return function(r){var n,i,u,l,f=h(e);if(!Array.isArray(f)){var p=f;return(b=a.innerValidate(e,p(r),t)).success||"VALUE_INCORRECT"!==b.code||"literal"!==e.tag?b:c.FAILURE.VALUE_INCORRECT("literal",'"'+s.literal(e.value)+'"','"'+r+'"')}switch(e.tag){case"union":try{for(var d=o(e.alternatives),v=d.next();!v.done;v=d.next()){var g=v.value;if((b=y(g.reflect,t)(r)).success)return b}}catch(e){n={error:e}}finally{try{v&&!v.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return c.FAILURE.TYPE_INCORRECT(e,r);case"intersect":try{for(var _=o(e.intersectees),S=_.next();!S.done;S=_.next()){var b,m=S.value;if(!(b=y(m.reflect,t)(r)).success)return b}}catch(e){u={error:e}}finally{try{S&&!S.done&&(l=_.return)&&l.call(_)}finally{if(u)throw u.error}}return c.SUCCESS(r);default:throw Error("impossible")}}},g=function(e){switch(e.tag){case"literal":return l(String(e.value));case"brand":return g(e.entity);case"constraint":return g(e.underlying);case"union":return e.alternatives.map(g).join("|");case"template":return e.strings.map(l).reduce((function(t,r,n){var i=t+r,o=e.runtypes[n];return o?i+"(?:"+g(o.reflect)+")":i}),"");default:return n(v[e.tag]||[void 0,".*"]).slice(1).join("|")}},_=function(e){var t=e.strings.map(l).reduce((function(t,r,n){var i=t+r,o=e.runtypes[n];return o?i+"("+g(o.reflect)+")":i}),"");return new RegExp("^"+t+"$","su")};t.Template=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n(f(e),2),i=r[0],o=r[1],l={tag:"template",strings:i,runtypes:o},p=_(l),d=function(e,t){var r=e.match(p);if(r){for(var n=r.slice(1),i=0;i<o.length;i++){var a=o[i],f=n[i],d=y(a.reflect,t)(f);if(!d.success)return d}return c.SUCCESS(e)}return c.FAILURE.VALUE_INCORRECT("string",""+u.default(l),'"'+s.literal(e)+'"')};return a.create((function(e,t){if("string"!=typeof e)return c.FAILURE.TYPE_INCORRECT(l,e);var r=d(e,t);if(r.success)return c.SUCCESS(e);var n=c.FAILURE.VALUE_INCORRECT("string",""+u.default(l),'"'+e+'"');return n.message!==r.message&&(n.message+=" (inner: "+r.message+")"),n}),l)}},4533:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tuple=void 0;var n=r(8200),i=r(3732);t.Tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={tag:"tuple",components:e};return n.create((function(t,o){if(!Array.isArray(t))return i.FAILURE.TYPE_INCORRECT(r,t);if(t.length!==e.length)return i.FAILURE.CONSTRAINT_FAILED(r,"Expected length "+e.length+", but was "+t.length);var a=i.enumerableKeysOf(t),u=a.map((function(r){return n.innerValidate(e[r],t[r],o)})),c=a.reduce((function(e,t){var r=u[t];return r.success||(e[t]=r.details||r.message),e}),[]);return 0!==i.enumerableKeysOf(c).length?i.FAILURE.CONTENT_INCORRECT(r,c):i.SUCCESS(t)}),r)}},6418:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Union=void 0;var i=r(8200),o=r(3732);t.Union=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(r){for(var n=0;n<e.length;n++)if(e[n].guard(r))return t[n](r)}},a={tag:"union",alternatives:e,match:r};return i.create((function(t,r){var u,c,s,l,f,p,d,v;if("object"!=typeof t||null===t){try{for(var h=n(e),y=h.next();!y.done;y=h.next()){var g=y.value;if(i.innerValidate(g,t,r).success)return o.SUCCESS(t)}}catch(e){u={error:e}}finally{try{y&&!y.done&&(c=h.return)&&c.call(h)}finally{if(u)throw u.error}}return o.FAILURE.TYPE_INCORRECT(a,t)}var _={};try{for(var S=n(e),b=S.next();!b.done;b=S.next())if("record"===(g=b.value).reflect.tag){var m=function(e){var t=g.reflect.fields[e];"literal"===t.tag&&(_[e]?_[e].every((function(e){return e!==t.value}))&&_[e].push(t.value):_[e]=[t.value])};for(var O in g.reflect.fields)m(O)}}catch(e){s={error:e}}finally{try{b&&!b.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}for(var O in _)if(_[O].length===e.length)try{for(var E=(f=void 0,n(e)),T=E.next();!T.done;T=E.next())if("record"===(g=T.value).reflect.tag){var R=g.reflect.fields[O];if("literal"===R.tag&&o.hasKey(O,t)&&t[O]===R.value)return i.innerValidate(g,t,r)}}catch(e){f={error:e}}finally{try{T&&!T.done&&(p=E.return)&&p.call(E)}finally{if(f)throw f.error}}try{for(var w=n(e),A=w.next();!A.done;A=w.next()){var P=A.value;if(i.innerValidate(P,t,r).success)return o.SUCCESS(t)}}catch(e){d={error:e}}finally{try{A&&!A.done&&(v=w.return)&&v.call(w)}finally{if(d)throw d.error}}return o.FAILURE.TYPE_INCORRECT(a,t)}),a)}},1006:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Unknown=void 0;var n=r(8200),i=r(3732);t.Unknown=n.create((function(e){return i.SUCCESS(e)}),{tag:"unknown"})},2002:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Void=void 0;var n=r(1006);t.Void=n.Unknown},3732:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.FAILURE=t.SUCCESS=t.enumerableKeysOf=t.typeOf=t.hasKey=void 0;var i=r(6734),o=r(2973);t.hasKey=function(e,t){return"object"==typeof t&&null!==t&&e in t},t.typeOf=function(e){var t,r,n;return"object"==typeof e?null===e?"null":Array.isArray(e)?"array":"Object"===(null===(t=e.constructor)||void 0===t?void 0:t.name)?"object":null!==(n=null===(r=e.constructor)||void 0===r?void 0:r.name)&&void 0!==n?n:typeof e:typeof e},t.enumerableKeysOf=function(e){return"object"==typeof e&&null!==e?Reflect.ownKeys(e).filter((function(t){var r,n;return null===(n=null===(r=e.propertyIsEnumerable)||void 0===r?void 0:r.call(e,t))||void 0===n||n})):[]},t.SUCCESS=function(e){return{success:!0,value:e}},t.FAILURE=Object.assign((function(e,t,r){return n({success:!1,code:e,message:t},r?{details:r}:{})}),{TYPE_INCORRECT:function(e,r){var n="Expected "+("template"===e.tag?"string "+o.default(e):o.default(e))+", but was "+t.typeOf(r);return t.FAILURE(i.Failcode.TYPE_INCORRECT,n)},VALUE_INCORRECT:function(e,r,n){return t.FAILURE(i.Failcode.VALUE_INCORRECT,"Expected "+e+" "+String(r)+", but was "+String(n))},KEY_INCORRECT:function(e,r,n){return t.FAILURE(i.Failcode.KEY_INCORRECT,"Expected "+o.default(e)+" key to be "+o.default(r)+", but was "+t.typeOf(n))},CONTENT_INCORRECT:function(e,r){var n="Expected "+o.default(e)+", but was incompatible";return t.FAILURE(i.Failcode.CONTENT_INCORRECT,n,r)},ARGUMENT_INCORRECT:function(e){return t.FAILURE(i.Failcode.ARGUMENT_INCORRECT,e)},RETURN_INCORRECT:function(e){return t.FAILURE(i.Failcode.RETURN_INCORRECT,e)},CONSTRAINT_FAILED:function(e,r){var n=r?": "+r:"";return t.FAILURE(i.Failcode.CONSTRAINT_FAILED,"Failed constraint check for "+o.default(e)+n)},PROPERTY_MISSING:function(e){var r="Expected "+o.default(e)+", but was missing";return t.FAILURE(i.Failcode.PROPERTY_MISSING,r)},PROPERTY_PRESENT:function(e){var r="Expected nothing, but was "+t.typeOf(e);return t.FAILURE(i.Failcode.PROPERTY_PRESENT,r)},NOTHING_EXPECTED:function(e){var r="Expected nothing, but was "+t.typeOf(e);return t.FAILURE(i.Failcode.NOTHING_EXPECTED,r)}})},8253:function(e,t){var r,n;r=function(){"use strict";var e=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return e.length?e+t:e}function u(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e&&n){var o=function(t){"object"===(void 0===t?"undefined":r(t))&&Object.getOwnPropertyNames(t).forEach((function(r){e[r]=t[r]}))},a=!0,u=!1,c=void 0;try{for(var s,l=n[Symbol.iterator]();!(a=(s=l.next()).done);a=!0)o(s.value)}catch(e){u=!0,c=e}finally{try{!a&&l.return&&l.return()}finally{if(u)throw c}}}return e}function c(e){return e&&e.constructor.prototype===Object.prototype}function s(e){return e&&e.constructor.prototype===Array.prototype}function l(e){if(!e)return e;if("function"==typeof e.clone)return e.clone();if(c(e)||s(e)){var t=new e.constructor;return Object.getOwnPropertyNames(e).forEach((function(r){"function"!=typeof e[r]&&(t[r]=l(e[r]))})),t}return JSON.parse(JSON.stringify(e))}function f(e,t,n){var i=void 0===t?"undefined":r(t);if("function"!==i&&"string"!==i)throw new Error("type must be a class constructor or string");if("function"!=typeof n)throw new Error("handler must be a function");var o=!0,a=!1,u=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var l=c.value;if(l.type===t)return void(l.handler=n)}}catch(e){a=!0,u=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}e.push({type:t,handler:n})}function p(e,t,r){return d(e,t)||d(e,r)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];if((void 0===e?"undefined":r(e))===i.type||"string"!=typeof i.type&&e instanceof i.type)return i.handler}}function v(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,v={isSquelBuilder:function(e){return e&&!!e._toParamString}},h=function(e){return!v.isSquelBuilder(e)||!e.options.rawNesting};v.DefaultQueryBuilderOptions={autoQuoteTableNames:!1,autoQuoteFieldNames:!1,autoQuoteAliasNames:!0,useAsForTableAliasNames:!1,nameQuoteCharacter:"`",tableAliasQuoteCharacter:"`",fieldAliasQuoteCharacter:'"',valueHandlers:[],parameterCharacter:"?",numberedParameters:!1,numberedParametersPrefix:"$",numberedParametersStartAt:1,replaceSingleQuotes:!1,singleQuoteReplacement:"''",separator:" ",stringFormatter:null,rawNesting:!1},v.globalValueHandlers=[],v.registerValueHandler=function(e,t){f(v.globalValueHandlers,e,t)},v.Cloneable=function(){function e(){o(this,e)}return t(e,[{key:"clone",value:function(){return u(new this.constructor,l(u({},this)))}}]),e}(),v.BaseBuilder=function(e){function a(e){o(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this)),r=JSON.parse(JSON.stringify(v.DefaultQueryBuilderOptions));return["stringFormatter"].forEach((function(e){r[e]=v.DefaultQueryBuilderOptions[e]})),t.options=u({},r,e),t}return i(a,e),t(a,[{key:"registerValueHandler",value:function(e,t){return f(this.options.valueHandlers,e,t),this}},{key:"_sanitizeExpression",value:function(e){if(!v.isSquelBuilder(e)&&"string"!=typeof e)throw new Error("expression must be a stringÂ or builder instance");return e}},{key:"_sanitizeName",value:function(e,t){if("string"!=typeof e)throw new Error(t+" must be a string");return e}},{key:"_sanitizeField",value:function(e){return v.isSquelBuilder(e)||(e=this._sanitizeName(e,"field name")),e}},{key:"_sanitizeBaseBuilder",value:function(e){if(v.isSquelBuilder(e))return e;throw new Error("must be a builder instance")}},{key:"_sanitizeTable",value:function(e){if("string"!=typeof e)try{e=this._sanitizeBaseBuilder(e)}catch(e){throw new Error("table name must be a string or a builder")}else e=this._sanitizeName(e,"table");return e}},{key:"_sanitizeTableAlias",value:function(e){return this._sanitizeName(e,"table alias")}},{key:"_sanitizeFieldAlias",value:function(e){return this._sanitizeName(e,"field alias")}},{key:"_sanitizeLimitOffset",value:function(e){if(0>(e=parseInt(e))||isNaN(e))throw new Error("limit/offset must be >= 0");return e}},{key:"_sanitizeValue",value:function(e){var t=void 0===e?"undefined":r(e);if(null===e);else if("string"===t||"number"===t||"boolean"===t);else if(v.isSquelBuilder(e));else if(!p(e,this.options.valueHandlers,v.globalValueHandlers))throw new Error("field value must be a string, number, boolean, null or one of the registered custom value types");return e}},{key:"_escapeValue",value:function(e){return this.options.replaceSingleQuotes&&e?e.replace(/\'/g,this.options.singleQuoteReplacement):e}},{key:"_formatTableName",value:function(e){if(this.options.autoQuoteTableNames){var t=this.options.nameQuoteCharacter;e=""+t+e+t}return e}},{key:"_formatFieldAlias",value:function(e){if(this.options.autoQuoteAliasNames){var t=this.options.fieldAliasQuoteCharacter;e=""+t+e+t}return e}},{key:"_formatTableAlias",value:function(e){if(this.options.autoQuoteAliasNames){var t=this.options.tableAliasQuoteCharacter;e=""+t+e+t}return this.options.useAsForTableAliasNames?"AS "+e:e}},{key:"_formatFieldName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options.autoQuoteFieldNames){var r=this.options.nameQuoteCharacter;e=t.ignorePeriodsForFieldNameQuotes?""+r+e+r:e.split(".").map((function(e){return"*"===e?e:""+r+e+r})).join(".")}return e}},{key:"_formatCustomValue",value:function(e,t,r){var n=p(e,this.options.valueHandlers,v.globalValueHandlers);return n&&(e=n(e,t,r))&&e.rawNesting?{formatted:!0,rawNesting:!0,value:e.value}:{formatted:!!n,value:e}}},{key:"_formatValueForParamArray",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(e)?e.map((function(e){return t._formatValueForParamArray(e,r)})):this._formatCustomValue(e,!0,r).value}},{key:"_formatValueForQueryString",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._formatCustomValue(e,!1,n),o=i.rawNesting,a=i.formatted,u=i.value;if(a)return o?u:this._applyNestingFormatting(u,h(e));if(s(u))u=u.map((function(e){return t._formatValueForQueryString(e)})),u=this._applyNestingFormatting(u.join(", "),h(u));else{var c=void 0===u?"undefined":r(u);if(null===u)u="NULL";else if("boolean"===c)u=u?"TRUE":"FALSE";else if(v.isSquelBuilder(u))u=this._applyNestingFormatting(u.toString(),h(u));else if("number"!==c){if("string"===c&&this.options.stringFormatter)return this.options.stringFormatter(u);u=n.dontQuote?""+u:"'"+this._escapeValue(u)+"'"}}return u}},{key:"_applyNestingFormatting",value:function(e){if(e&&"string"==typeof e&&(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&!this.options.rawNesting){var t="("===e.charAt(0)&&")"===e.charAt(e.length-1);if(t)for(var r=0,n=1;e.length-1>++r;){var i=e.charAt(r);if("("===i)n++;else if(")"===i&&1>--n){t=!1;break}}t||(e="("+e+")")}return e}},{key:"_buildString",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.nested,i=r.buildParameterized,o=r.formattingOptions;t=t||[],e=e||"";for(var a="",u=-1,c=[],l=this.options.parameterCharacter,f=0;e.length>f;)if(e.substr(f,l.length)===l){var p=t[++u];if(i)if(v.isSquelBuilder(p)){var d=p._toParamString({buildParameterized:i,nested:!0});a+=d.text,d.values.forEach((function(e){return c.push(e)}))}else s(p=this._formatValueForParamArray(p,o))?(a+="("+p.map((function(){return l})).join(", ")+")",p.forEach((function(e){return c.push(e)}))):(a+=l,c.push(p));else a+=this._formatValueForQueryString(p,o);f+=l.length}else a+=e.charAt(f),f++;return{text:this._applyNestingFormatting(a,!!n),values:c}}},{key:"_buildManyStrings",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[],i=[],o=0;e.length>o;++o){var a=e[o],u=t[o],c=this._buildString(a,u,{buildParameterized:r.buildParameterized,nested:!1}),s=c.text,l=c.values;n.push(s),l.forEach((function(e){return i.push(e)}))}return{text:(n=n.join(this.options.separator)).length?this._applyNestingFormatting(n,!!r.nested):"",values:i}}},{key:"_toParamString",value:function(e){throw new Error("Not yet implemented")}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._toParamString(e).text}},{key:"toParam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._toParamString(u({},e,{buildParameterized:!0}))}}]),a}(v.Cloneable),v.Expression=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._nodes=[],t}return i(r,e),t(r,[{key:"and",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e=this._sanitizeExpression(e),this._nodes.push({type:"AND",expr:e,para:r}),this}},{key:"or",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e=this._sanitizeExpression(e),this._nodes.push({type:"OR",expr:e,para:r}),this}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],r=[],n=!0,i=!1,o=void 0;try{for(var a,u=this._nodes[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value,s=c.type,l=c.expr,f=c.para,p=v.isSquelBuilder(l)?l._toParamString({buildParameterized:e.buildParameterized,nested:!0}):this._buildString(l,f,{buildParameterized:e.buildParameterized}),d=p.text,h=p.values;t.length&&t.push(s),t.push(d),h.forEach((function(e){return r.push(e)}))}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return t=t.join(" "),{text:this._applyNestingFormatting(t,!!e.nested),values:r}}}]),r}(v.BaseBuilder),v.Case=function(e){function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,r);var i=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return c(e)&&(t=e,e=null),e&&(i._fieldName=i._sanitizeField(e)),i.options=u({},v.DefaultQueryBuilderOptions,t),i._cases=[],i._elseValue=null,i}return i(r,e),t(r,[{key:"when",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this._cases.unshift({expression:e,values:r||[]}),this}},{key:"then",value:function(e){if(0==this._cases.length)throw new Error("when() needs to be called first");return this._cases[0].result=e,this}},{key:"else",value:function(e){return this._elseValue=e,this}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",r=[],n=!0,i=!1,o=void 0;try{for(var u,c=this._cases[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var s=u.value,l=s.expression,f=s.values,p=s.result;t=a(t," ");var d=this._buildString(l,f,{buildParameterized:e.buildParameterized,nested:!0});t+="WHEN "+d.text+" THEN "+this._formatValueForQueryString(p),d.values.forEach((function(e){return r.push(e)}))}}catch(e){i=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}return t.length?(t+=" ELSE "+this._formatValueForQueryString(this._elseValue)+" END",this._fieldName&&(t=this._fieldName+" "+t),t="CASE "+t):t=this._formatValueForQueryString(this._elseValue),{text:t,values:r}}}]),r}(v.BaseBuilder),v.Block=function(e){function r(e){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return i(r,e),t(r,[{key:"exposedMethods",value:function(){for(var e={},t=this;t;)Object.getOwnPropertyNames(t).forEach((function(r){"constructor"===r||"function"!=typeof t[r]||"_"===r.charAt(0)||v.Block.prototype[r]||(e[r]=t[r])})),t=Object.getPrototypeOf(t);return e}}]),r}(v.BaseBuilder),v.StringBlock=function(e){function r(e,t){o(this,r);var i=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return i._str=t,i}return i(r,e),t(r,[{key:"_toParamString",value:function(){return{text:this._str,values:[]}}}]),r}(v.Block),v.FunctionBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._strings=[],t._values=[],t}return i(r,e),t(r,[{key:"function",value:function(e){this._strings.push(e);for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this._values.push(r)}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._buildManyStrings(this._strings,this._values,e)}}]),r}(v.Block),v.registerValueHandler(v.FunctionBlock,(function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.toParam():e.toString()})),v.AbstractTableBlock=function(e){function r(e,t){o(this,r);var i=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return i._tables=[],i}return i(r,e),t(r,[{key:"_table",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t=t?this._sanitizeTableAlias(t):t,e=this._sanitizeTable(e),this.options.singleTable&&(this._tables=[]),this._tables.push({table:e,alias:t})}},{key:"_hasTable",value:function(){return 0<this._tables.length}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",r=[];if(this._hasTable()){var n=!0,i=!1,o=void 0;try{for(var u,c=this._tables[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var s=u.value,l=s.table,f=s.alias;t=a(t,", ");var p=void 0;if(v.isSquelBuilder(l)){var d=l._toParamString({buildParameterized:e.buildParameterized,nested:!0}),h=d.text,y=d.values;p=h,y.forEach((function(e){return r.push(e)}))}else p=this._formatTableName(l);f&&(p+=" "+this._formatTableAlias(f)),t+=p}}catch(e){i=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}this.options.prefix&&(t=this.options.prefix+" "+t)}return{text:t,values:r}}}]),r}(v.Block),v.TargetTableBlock=function(e){function r(){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,e),t(r,[{key:"target",value:function(e){this._table(e)}}]),r}(v.AbstractTableBlock),v.UpdateTableBlock=function(r){function a(){return o(this,a),n(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return i(a,r),t(a,[{key:"table",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._table(e,t)}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._hasTable())throw new Error("table() needs to be called");return e(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"_toParamString",this).call(this,t)}}]),a}(v.AbstractTableBlock),v.FromTableBlock=function(e){function r(e){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,u({},e,{prefix:"FROM"})))}return i(r,e),t(r,[{key:"from",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._table(e,t)}}]),r}(v.AbstractTableBlock),v.IntoTableBlock=function(r){function a(e){return o(this,a),n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,u({},e,{prefix:"INTO",singleTable:!0})))}return i(a,r),t(a,[{key:"into",value:function(e){this._table(e)}},{key:"_toParamString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._hasTable())throw new Error("into() needs to be called");return e(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"_toParamString",this).call(this,t)}}]),a}(v.AbstractTableBlock),v.GetFieldBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._fields=[],t}return i(r,e),t(r,[{key:"fields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s(e)){var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;this.field(u,null,t)}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}}else for(var c in e){var l=e[c];this.field(c,l,t)}}},{key:"field",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t=t?this._sanitizeFieldAlias(t):t,e=this._sanitizeField(e),this._fields.filter((function(r){return r.name===e&&r.alias===t})).length)return this;this._fields.push({name:e,alias:t,options:r})}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryBuilder,r=e.buildParameterized,n="",i=[],o=!0,u=!1,c=void 0;try{for(var s,l=this._fields[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var f=s.value;n=a(n,", ");var p=f.name,d=f.alias,h=f.options;if("string"==typeof p)n+=this._formatFieldName(p,h);else{var y=p._toParamString({nested:!0,buildParameterized:r});n+=y.text,y.values.forEach((function(e){return i.push(e)}))}d&&(n+=" AS "+this._formatFieldAlias(d))}}catch(e){u=!0,c=e}finally{try{!o&&l.return&&l.return()}finally{if(u)throw c}}if(!n.length){var g=t&&t.getBlock(v.FromTableBlock);g&&g._hasTable()&&(n="*")}return{text:n,values:i}}}]),r}(v.Block),v.AbstractSetFieldBlock=function(e){function a(e){o(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t._reset(),t}return i(a,e),t(a,[{key:"_reset",value:function(){this._fields=[],this._values=[[]],this._valueOptions=[[]]}},{key:"_set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._values.length>1)throw new Error("Cannot set multiple rows of fields this way.");void 0!==t&&(t=this._sanitizeValue(t)),e=this._sanitizeField(e);var n=this._fields.indexOf(e);-1===n&&(this._fields.push(e),n=this._fields.length-1),this._values[0][n]=t,this._valueOptions[0][n]=r}},{key:"_setFields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==(void 0===e?"undefined":r(e)))throw new Error("Expected an object but got "+(void 0===e?"undefined":r(e)));for(var n in e)this._set(n,e[n],t)}},{key:"_setFieldsRows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!s(e))throw new Error("Expected an array of objects but got "+(void 0===e?"undefined":r(e)));this._reset();for(var n=0;e.length>n;++n){var i=e[n];for(var o in i){var a=i[o];o=this._sanitizeField(o),a=this._sanitizeValue(a);var u=this._fields.indexOf(o);if(0<n&&-1===u)throw new Error("All fields in subsequent rows must match the fields in the first row");-1===u&&(this._fields.push(o),u=this._fields.length-1),s(this._values[n])||(this._values[n]=[],this._valueOptions[n]=[]),this._values[n][u]=a,this._valueOptions[n][u]=t}}}}]),a}(v.Block),v.SetFieldBlock=function(e){function r(){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,e),t(r,[{key:"set",value:function(e,t,r){this._set(e,t,r)}},{key:"setFields",value:function(e,t){this._setFields(e,t)}},{key:"_toParamString",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).buildParameterized;if(0>=this._fields.length)throw new Error("set() needs to be called");for(var t="",r=[],n=0;n<this._fields.length;++n){t=a(t,", ");var i=this._formatFieldName(this._fields[n]),o=this._values[0][n];0>i.indexOf("=")&&(i=i+" = "+this.options.parameterCharacter);var u=this._buildString(i,[o],{buildParameterized:e,formattingOptions:this._valueOptions[0][n]});t+=u.text,u.values.forEach((function(e){return r.push(e)}))}return{text:"SET "+t,values:r}}}]),r}(v.AbstractSetFieldBlock),v.InsertFieldValueBlock=function(e){function r(){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,e),t(r,[{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._set(e,t,r)}},{key:"setFields",value:function(e,t){this._setFields(e,t)}},{key:"setFieldsRows",value:function(e,t){this._setFieldsRows(e,t)}},{key:"_toParamString",value:function(){for(var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).buildParameterized,r=this._fields.map((function(t){return e._formatFieldName(t)})).join(", "),n=[],i=[],o=0;o<this._values.length;++o){n[o]="";for(var u=0;u<this._values[o].length;++u){var c=this._buildString(this.options.parameterCharacter,[this._values[o][u]],{buildParameterized:t,formattingOptions:this._valueOptions[o][u]});c.values.forEach((function(e){return i.push(e)})),n[o]=a(n[o],", "),n[o]+=c.text}}return{text:r.length?"("+r+") VALUES ("+n.join("), (")+")":"",values:i}}}]),r}(v.AbstractSetFieldBlock),v.InsertFieldsFromQueryBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._fields=[],t._query=null,t}return i(r,e),t(r,[{key:"fromQuery",value:function(e,t){var r=this;this._fields=e.map((function(e){return r._sanitizeField(e)})),this._query=this._sanitizeBaseBuilder(t)}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",r=[];if(this._fields.length&&this._query){var n=this._query._toParamString({buildParameterized:e.buildParameterized,nested:!0}),i=n.text,o=n.values;t="("+this._fields.join(", ")+") "+this._applyNestingFormatting(i),r=o}return{text:t,values:r}}}]),r}(v.Block),v.DistinctBlock=function(e){function r(){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,e),t(r,[{key:"distinct",value:function(){this._useDistinct=!0}},{key:"_toParamString",value:function(){return{text:this._useDistinct?"DISTINCT":"",values:[]}}}]),r}(v.Block),v.GroupByBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._groups=[],t}return i(r,e),t(r,[{key:"group",value:function(e){this._groups.push(this._sanitizeField(e))}},{key:"_toParamString",value:function(){return{text:this._groups.length?"GROUP BY "+this._groups.join(", "):"",values:[]}}}]),r}(v.Block),v.AbstractVerbSingleValueBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._value=null,t}return i(r,e),t(r,[{key:"_setValue",value:function(e){this._value=null!==e?this._sanitizeLimitOffset(e):e}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null!==this._value?this.options.verb+" "+this.options.parameterCharacter:"",r=null!==this._value?[this._value]:[];return this._buildString(t,r,e)}}]),r}(v.Block),v.OffsetBlock=function(e){function r(e){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,u({},e,{verb:"OFFSET"})))}return i(r,e),t(r,[{key:"offset",value:function(e){this._setValue(e)}}]),r}(v.AbstractVerbSingleValueBlock),v.LimitBlock=function(e){function r(e){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,u({},e,{verb:"LIMIT"})))}return i(r,e),t(r,[{key:"limit",value:function(e){this._setValue(e)}}]),r}(v.AbstractVerbSingleValueBlock),v.AbstractConditionBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._conditions=[],t}return i(r,e),t(r,[{key:"_condition",value:function(e){e=this._sanitizeExpression(e);for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this._conditions.push({expr:e,values:r||[]})}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],r=[],n=!0,i=!1,o=void 0;try{for(var a,u=this._conditions[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value,s=c.expr,l=c.values,f=v.isSquelBuilder(s)?s._toParamString({buildParameterized:e.buildParameterized}):this._buildString(s,l,{buildParameterized:e.buildParameterized});f.text.length&&t.push(f.text),f.values.forEach((function(e){return r.push(e)}))}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return t.length&&(t=t.join(") AND (")),{text:t.length?this.options.verb+" ("+t+")":"",values:r}}}]),r}(v.Block),v.WhereBlock=function(e){function r(e){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,u({},e,{verb:"WHERE"})))}return i(r,e),t(r,[{key:"where",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this._condition.apply(this,[e].concat(r))}}]),r}(v.AbstractConditionBlock),v.HavingBlock=function(e){function r(e){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,u({},e,{verb:"HAVING"})))}return i(r,e),t(r,[{key:"having",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this._condition.apply(this,[e].concat(r))}}]),r}(v.AbstractConditionBlock),v.OrderByBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._orders=[],t}return i(r,e),t(r,[{key:"order",value:function(e,t){e=this._sanitizeField(e),"string"!=typeof t&&(void 0===t?t="ASC":null!==t&&(t=t?"ASC":"DESC"));for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];this._orders.push({field:e,dir:t,values:n||[]})}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",r=[],n=!0,i=!1,o=void 0;try{for(var u,c=this._orders[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var l=u.value,f=l.field,p=l.dir,d=l.values;t=a(t,", ");var v=this._buildString(f,d,{buildParameterized:e.buildParameterized});t+=v.text,s(v.values)&&v.values.forEach((function(e){return r.push(e)})),null!==p&&(t+=" "+p)}}catch(e){i=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}return{text:t.length?"ORDER BY "+t:"",values:r}}}]),r}(v.Block),v.JoinBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._joins=[],t}return i(r,e),t(r,[{key:"join",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"INNER";e=this._sanitizeTable(e,!0),t=t?this._sanitizeTableAlias(t):t,r=r?this._sanitizeExpression(r):r,this._joins.push({type:n,table:e,alias:t,condition:r})}},{key:"left_join",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.join(e,t,r,"LEFT")}},{key:"right_join",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.join(e,t,r,"RIGHT")}},{key:"outer_join",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.join(e,t,r,"OUTER")}},{key:"left_outer_join",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.join(e,t,r,"LEFT OUTER")}},{key:"full_join",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.join(e,t,r,"FULL")}},{key:"cross_join",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.join(e,t,r,"CROSS")}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",r=[],n=!0,i=!1,o=void 0;try{for(var u,c=this._joins[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var s=u.value,l=s.type,f=s.table,p=s.alias,d=s.condition;t=a(t,this.options.separator);var h=void 0;if(v.isSquelBuilder(f)){var y=f._toParamString({buildParameterized:e.buildParameterized,nested:!0});y.values.forEach((function(e){return r.push(e)})),h=y.text}else h=this._formatTableName(f);if(t+=l+" JOIN "+h,p&&(t+=" "+this._formatTableAlias(p)),d){t+=" ON ";var g=void 0;g=v.isSquelBuilder(d)?d._toParamString({buildParameterized:e.buildParameterized}):this._buildString(d,[],{buildParameterized:e.buildParameterized}),t+=this._applyNestingFormatting(g.text),g.values.forEach((function(e){return r.push(e)}))}}}catch(e){i=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}return{text:t,values:r}}}]),r}(v.Block),v.UnionBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._unions=[],t}return i(r,e),t(r,[{key:"union",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UNION";e=this._sanitizeTable(e),this._unions.push({type:t,table:e})}},{key:"union_all",value:function(e){this.union(e,"UNION ALL")}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",r=[],n=!0,i=!1,o=void 0;try{for(var u,c=this._unions[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var s=u.value,l=s.type,f=s.table;t=a(t,this.options.separator);var p=void 0;if(f instanceof v.BaseBuilder){var d=f._toParamString({buildParameterized:e.buildParameterized,nested:!0});p=d.text,d.values.forEach((function(e){return r.push(e)}))}else t=this._formatTableName(f);t+=l+" "+p}}catch(e){i=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}return{text:t,values:r}}}]),r}(v.Block),v.QueryBuilder=function(r){function a(e,t){o(this,a);var r=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));r.blocks=t||[];var i=!0,u=!1,c=void 0;try{for(var s,l=r.blocks[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var f=s.value,p=f.exposedMethods();for(var d in p){var v=p[d];if(void 0!==r[d])throw new Error("Builder already has a builder method called: "+d);!function(e,t,n){r[t]=function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];return n.call.apply(n,[e].concat(i)),r}}(f,d,v)}}}catch(e){u=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(u)throw c}}return r}return i(a,r),t(a,[{key:"registerValueHandler",value:function(t,r){var n=!0,i=!1,o=void 0;try{for(var u,c=this.blocks[Symbol.iterator]();!(n=(u=c.next()).done);n=!0)u.value.registerValueHandler(t,r)}catch(e){i=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}return e(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"registerValueHandler",this).call(this,t,r),this}},{key:"updateOptions",value:function(e){this.options=u({},this.options,e);var t=!0,r=!1,n=void 0;try{for(var i,o=this.blocks[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.options=u({},a.options,e)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}},{key:"_toParamString",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=u({},this.options,t);var r=this.blocks.map((function(r){return r._toParamString({buildParameterized:t.buildParameterized,queryBuilder:e})})),n=r.map((function(e){return e.text})),i=r.map((function(e){return e.values})),o=n.filter((function(e){return 0<e.length})).join(t.separator),a=[];if(i.forEach((function(e){return e.forEach((function(e){return a.push(e)}))})),!t.nested&&t.numberedParameters){var c=void 0!==t.numberedParametersStartAt?t.numberedParametersStartAt:1,s=t.parameterCharacter.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");o=o.replace(new RegExp(s,"g"),(function(){return""+t.numberedParametersPrefix+c++}))}return{text:this._applyNestingFormatting(o,!!t.nested),values:a}}},{key:"clone",value:function(){var e=this.blocks.map((function(e){return e.clone()}));return new this.constructor(this.options,e)}},{key:"getBlock",value:function(e){return this.blocks.filter((function(t){return t instanceof e}))[0]}}]),a}(v.BaseBuilder),v.Select=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),r=r||[new v.StringBlock(e,"SELECT"),new v.FunctionBlock(e),new v.DistinctBlock(e),new v.GetFieldBlock(e),new v.FromTableBlock(e),new v.JoinBlock(e),new v.WhereBlock(e),new v.GroupByBlock(e),new v.HavingBlock(e),new v.OrderByBlock(e),new v.LimitBlock(e),new v.OffsetBlock(e),new v.UnionBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),t}(v.QueryBuilder),v.Update=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),r=r||[new v.StringBlock(e,"UPDATE"),new v.UpdateTableBlock(e),new v.SetFieldBlock(e),new v.WhereBlock(e),new v.OrderByBlock(e),new v.LimitBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),t}(v.QueryBuilder),v.Delete=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),r=r||[new v.StringBlock(e,"DELETE"),new v.TargetTableBlock(e),new v.FromTableBlock(u({},e,{singleTable:!0})),new v.JoinBlock(e),new v.WhereBlock(e),new v.OrderByBlock(e),new v.LimitBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),t}(v.QueryBuilder),v.Insert=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),r=r||[new v.StringBlock(e,"INSERT"),new v.IntoTableBlock(e),new v.InsertFieldValueBlock(e),new v.InsertFieldsFromQueryBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),t}(v.QueryBuilder);var y={VERSION:"5.13.0",flavour:d,expr:function(e){return new v.Expression(e)},case:function(e,t){return new v.Case(e,t)},select:function(e,t){return new v.Select(e,t)},update:function(e,t){return new v.Update(e,t)},insert:function(e,t){return new v.Insert(e,t)},delete:function(e,t){return new v.Delete(e,t)},str:function(){var e=new v.FunctionBlock;return e.function.apply(e,arguments),e},rstr:function(){var e=new v.FunctionBlock({rawNesting:!0});return e.function.apply(e,arguments),e},registerValueHandler:v.registerValueHandler};return y.remove=y.delete,y.cls=v,y}var h=v();return h.flavours={},h.useFlavour=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return h;if(h.flavours[e]instanceof Function){var t=v(e);return h.flavours[e].call(null,t),t.flavours=h.flavours,t.useFlavour=h.useFlavour,t}throw new Error("Flavour not available: "+e)},h.flavours.mssql=function(r){var c=r.cls;c.DefaultQueryBuilderOptions.replaceSingleQuotes=!0,c.DefaultQueryBuilderOptions.autoQuoteAliasNames=!1,c.DefaultQueryBuilderOptions.numberedParametersPrefix="@",r.registerValueHandler(Date,(function(e){return"'"+e.getUTCFullYear()+"-"+(e.getUTCMonth()+1)+"-"+e.getUTCDate()+" "+e.getUTCHours()+":"+e.getUTCMinutes()+":"+e.getUTCSeconds()+"'"})),c.MssqlLimitOffsetTopBlock=function(e){function r(e){o(this,r);var a=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));a._limits=null,a._offsets=null;var u=function(e){e=this._sanitizeLimitOffset(e),this._parent._limits=e};return a.ParentBlock=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.options));return r._parent=e,r}return i(t,e),t}(c.Block),a.LimitBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.limit=u,t}return i(r,e),t(r,[{key:"_toParamString",value:function(){var e="";return this._parent._limits&&this._parent._offsets&&(e="FETCH NEXT "+this._parent._limits+" ROWS ONLY"),{text:e,values:[]}}}]),r}(a.ParentBlock),a.TopBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.top=u,t}return i(r,e),t(r,[{key:"_toParamString",value:function(){var e="";return this._parent._limits&&!this._parent._offsets&&(e="TOP ("+this._parent._limits+")"),{text:e,values:[]}}}]),r}(a.ParentBlock),a.OffsetBlock=function(e){function r(){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,e),t(r,[{key:"offset",value:function(e){this._parent._offsets=this._sanitizeLimitOffset(e)}},{key:"_toParamString",value:function(){var e="";return this._parent._offsets&&(e="OFFSET "+this._parent._offsets+" ROWS"),{text:e,values:[]}}}]),r}(a.ParentBlock),a}return i(r,e),t(r,[{key:"LIMIT",value:function(){return new this.LimitBlock(this)}},{key:"TOP",value:function(){return new this.TopBlock(this)}},{key:"OFFSET",value:function(){return new this.OffsetBlock(this)}}]),r}(c.Block),c.MssqlUpdateTopBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._limits=null,t.limit=t.top=function(e){t._limits=t._sanitizeLimitOffset(e)},t}return i(r,e),t(r,[{key:"_toParamString",value:function(){return{text:this._limits?"TOP ("+this._limits+")":"",values:[]}}}]),r}(c.Block),c.MssqlInsertFieldValueBlock=function(r){function a(e){o(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t._outputs=[],t}return i(a,r),t(a,[{key:"output",value:function(e){var t=this;"string"==typeof e?this._outputs.push("INSERTED."+this._sanitizeField(e)):e.forEach((function(e){t._outputs.push("INSERTED."+t._sanitizeField(e))}))}},{key:"_toParamString",value:function(t){var r=e(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"_toParamString",this).call(this,t);if(r.text.length&&0<this._outputs.length){var n="OUTPUT "+this._outputs.join(", ")+" ",i=r.text.indexOf("VALUES");r.text=r.text.substr(0,i)+n+r.text.substr(i)}return r}}]),a}(c.InsertFieldValueBlock),c.MssqlUpdateDeleteOutputBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._outputs=[],t}return i(r,e),t(r,[{key:"outputs",value:function(e){for(var t in e)this.output(t,e[t])}},{key:"output",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e=this._sanitizeField(e),t=t?this._sanitizeFieldAlias(t):t,this._outputs.push({name:this.options.forDelete?"DELETED."+e:"INSERTED."+e,alias:t})}},{key:"_toParamString",value:function(e){var t="";if(this._outputs.length){var r=!0,n=!1,i=void 0;try{for(var o,u=this._outputs[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var c=o.value;t=a(t,", "),t+=c.name,c.alias&&(t+=" AS "+this._formatFieldAlias(c.alias))}}catch(e){n=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw i}}t="OUTPUT "+t}return{text:t,values:[]}}}]),r}(c.Block),c.Select=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t);var i=new c.MssqlLimitOffsetTopBlock(e);return r=r||[new c.StringBlock(e,"SELECT"),new c.DistinctBlock(e),i.TOP(),new c.GetFieldBlock(e),new c.FromTableBlock(e),new c.JoinBlock(e),new c.WhereBlock(e),new c.GroupByBlock(e),new c.OrderByBlock(e),i.OFFSET(),i.LIMIT(),new c.UnionBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),t}(c.QueryBuilder),c.Update=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),r=r||[new c.StringBlock(e,"UPDATE"),new c.MssqlUpdateTopBlock(e),new c.UpdateTableBlock(e),new c.SetFieldBlock(e),new c.MssqlUpdateDeleteOutputBlock(e),new c.WhereBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),t}(c.QueryBuilder),c.Delete=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),r=r||[new c.StringBlock(e,"DELETE"),new c.TargetTableBlock(e),new c.FromTableBlock(u({},e,{singleTable:!0})),new c.JoinBlock(e),new c.MssqlUpdateDeleteOutputBlock(u({},e,{forDelete:!0})),new c.WhereBlock(e),new c.OrderByBlock(e),new c.LimitBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),t}(c.QueryBuilder),c.Insert=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),r=r||[new c.StringBlock(e,"INSERT"),new c.IntoTableBlock(e),new c.MssqlInsertFieldValueBlock(e),new c.InsertFieldsFromQueryBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),t}(c.QueryBuilder)},h.flavours.mysql=function(e){var r=e.cls;r.MysqlOnDuplicateKeyUpdateBlock=function(e){function r(){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,e),t(r,[{key:"onDupUpdate",value:function(e,t,r){this._set(e,t,r)}},{key:"_toParamString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",r=[],n=0;n<this._fields.length;++n){t=a(t,", ");var i=this._fields[n],o=this._values[0][n],u=this._valueOptions[0][n];if(void 0===o)t+=i;else{var c=this._buildString(i+" = "+this.options.parameterCharacter,[o],{buildParameterized:e.buildParameterized,formattingOptions:u});t+=c.text,c.values.forEach((function(e){return r.push(e)}))}}return{text:t.length?"ON DUPLICATE KEY UPDATE "+t:"",values:r}}}]),r}(r.AbstractSetFieldBlock),r.Insert=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),i=i||[new r.StringBlock(e,"INSERT"),new r.IntoTableBlock(e),new r.InsertFieldValueBlock(e),new r.InsertFieldsFromQueryBlock(e),new r.MysqlOnDuplicateKeyUpdateBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return i(t,e),t}(r.QueryBuilder),r.Replace=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),i=i||[new r.StringBlock(e,"REPLACE"),new r.IntoTableBlock(e),new r.InsertFieldValueBlock(e),new r.InsertFieldsFromQueryBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return i(t,e),t}(r.QueryBuilder),e.replace=function(e,t){return new r.Replace(e,t)}},h.flavours.postgres=function(e){var r=e.cls;r.DefaultQueryBuilderOptions.numberedParameters=!0,r.DefaultQueryBuilderOptions.numberedParametersStartAt=1,r.DefaultQueryBuilderOptions.autoQuoteAliasNames=!1,r.DefaultQueryBuilderOptions.useAsForTableAliasNames=!0,r.PostgresOnConflictKeyUpdateBlock=function(e){function r(){return o(this,r),n(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,e),t(r,[{key:"onConflict",value:function(e,t){var r=this;this._onConflict=!0,e&&(s(e)||(e=[e]),this._dupFields=e.map(this._sanitizeField.bind(this)),t&&Object.keys(t).forEach((function(e){r._set(e,t[e])})))}},{key:"_toParamString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",r=[],n=0;n<this._fields.length;++n){t=a(t,", ");var i=this._fields[n],o=this._values[0][n],u=this._valueOptions[0][n];if(void 0===o)t+=i;else{var c=this._buildString(i+" = "+this.options.parameterCharacter,[o],{buildParameterized:e.buildParameterized,formattingOptions:u});t+=c.text,c.values.forEach((function(e){return r.push(e)}))}}var s={text:"",values:r};if(this._onConflict){var l=this._dupFields?"("+this._dupFields.join(", ")+") ":"",f=t.length?"UPDATE SET "+t:"NOTHING";s.text="ON CONFLICT "+l+"DO "+f}return s}}]),r}(r.AbstractSetFieldBlock),r.ReturningBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._fields=[],t}return i(r,e),t(r,[{key:"returning",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t=t?this._sanitizeFieldAlias(t):t,e=this._sanitizeField(e),this._fields.filter((function(r){return r.name===e&&r.alias===t})).length)return this;this._fields.push({name:e,alias:t,options:r})}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.queryBuilder,e.buildParameterized),r="",n=[],i=!0,o=!1,u=void 0;try{for(var c,s=this._fields[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var l=c.value;r=a(r,", ");var f=l.name,p=l.alias,d=l.options;if("string"==typeof f)r+=this._formatFieldName(f,d);else{var v=f._toParamString({nested:!0,buildParameterized:t});r+=v.text,v.values.forEach((function(e){return n.push(e)}))}p&&(r+=" AS "+this._formatFieldAlias(p))}}catch(e){o=!0,u=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw u}}return{text:r.length>0?"RETURNING "+r:"",values:n}}}]),r}(r.Block),r.WithBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._tables=[],t}return i(r,e),t(r,[{key:"with",value:function(e,t){this._tables.push({alias:e,table:t})}},{key:"_toParamString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],r=[],n=!0,i=!1,o=void 0;try{for(var a,u=this._tables[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value,s=c.alias,l=c.table._toParamString({buildParameterized:e.buildParameterized,nested:!0});t.push(s+" AS "+l.text),l.values.forEach((function(e){return r.push(e)}))}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return{text:t.length?"WITH "+t.join(", "):"",values:r}}}]),r}(r.Block),r.DistinctOnBlock=function(e){function r(e){o(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._distinctFields=[],t}return i(r,e),t(r,[{key:"distinct",value:function(){var e=this;this._useDistinct=!0;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach((function(t){e._distinctFields.push(e._sanitizeField(t))}))}},{key:"_toParamString",value:function(){var e="";return this._useDistinct&&(e="DISTINCT",this._distinctFields.length&&(e+=" ON ("+this._distinctFields.join(", ")+")")),{text:e,values:[]}}}]),r}(r.Block),r.Select=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),i=i||[new r.WithBlock(e),new r.StringBlock(e,"SELECT"),new r.FunctionBlock(e),new r.DistinctOnBlock(e),new r.GetFieldBlock(e),new r.FromTableBlock(e),new r.JoinBlock(e),new r.WhereBlock(e),new r.GroupByBlock(e),new r.HavingBlock(e),new r.OrderByBlock(e),new r.LimitBlock(e),new r.OffsetBlock(e),new r.UnionBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return i(t,e),t}(r.QueryBuilder),r.Insert=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),i=i||[new r.WithBlock(e),new r.StringBlock(e,"INSERT"),new r.IntoTableBlock(e),new r.InsertFieldValueBlock(e),new r.InsertFieldsFromQueryBlock(e),new r.PostgresOnConflictKeyUpdateBlock(e),new r.ReturningBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return i(t,e),t}(r.QueryBuilder),r.Update=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),i=i||[new r.WithBlock(e),new r.StringBlock(e,"UPDATE"),new r.UpdateTableBlock(e),new r.SetFieldBlock(e),new r.FromTableBlock(e),new r.WhereBlock(e),new r.OrderByBlock(e),new r.LimitBlock(e),new r.ReturningBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return i(t,e),t}(r.QueryBuilder),r.Delete=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),i=i||[new r.WithBlock(e),new r.StringBlock(e,"DELETE"),new r.TargetTableBlock(e),new r.FromTableBlock(u({},e,{singleTable:!0})),new r.JoinBlock(e),new r.WhereBlock(e),new r.OrderByBlock(e),new r.LimitBlock(e),new r.ReturningBlock(e)],n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return i(t,e),t}(r.QueryBuilder)},h},void 0===(n=r.apply(t,[]))||(e.exports=n)},8022:function(e,t,r){var n=r(4481),i=r(6426),o=i;o.v1=n,o.v4=i,e.exports=o},8725:function(e){for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,i=t;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},9157:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},4481:function(e,t,r){var n,i,o=r(9157),a=r(8725),u=0,c=0;e.exports=function(e,t,r){var s=t&&r||0,l=t||[],f=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==p){var d=o();null==f&&(f=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==p&&(p=i=16383&(d[6]<<8|d[7]))}var v=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:c+1,y=v-u+(h-c)/1e4;if(y<0&&void 0===e.clockseq&&(p=p+1&16383),(y<0||v>u)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=v,c=h,i=p;var g=(1e4*(268435455&(v+=122192928e5))+h)%4294967296;l[s++]=g>>>24&255,l[s++]=g>>>16&255,l[s++]=g>>>8&255,l[s++]=255&g;var _=v/4294967296*1e4&268435455;l[s++]=_>>>8&255,l[s++]=255&_,l[s++]=_>>>24&15|16,l[s++]=_>>>16&255,l[s++]=p>>>8|128,l[s++]=255&p;for(var S=0;S<6;++S)l[s+S]=f[S];return t||a(l)}},6426:function(e,t,r){var n=r(9157),i=r(8725);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var u=0;u<16;++u)t[o+u]=a[u];return t||i(a)}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,i)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(i,o){var a=t.apply(r,n);function u(t){e(a,i,o,u,c,"next",t)}function c(t){e(a,i,o,u,c,"throw",t)}u(void 0)}))}}var n,i,o=r(7162),a=r.n(o);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){return function(e){if("object"===u(t=e)&&null!==t&&"message"in t&&"string"==typeof t.message)return e;var t;try{return new Error(JSON.stringify(e))}catch(t){return new Error(String(e))}}(e).message}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function p(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r(1372),r(2147),r(6710),(i=n||(n={})).VIEWER="Viewer",i.ADMIN="Administrator",i.EDITOR="Editor",i.SUPER_ADMIN="Super Administrator";var d=function(e){var r,n=e.description,i=e.roles,o=e.handler,c=e.middlewares;return{description:n,handler:o,roles:i,hasPermission:function(e){for(var t=function(t,r){if(i.some((function(r){return r===e[t]})))return{v:!0}},r=0,n=e.length;r<n;r++){var o=t(r);if("object"===u(o))return o.v}return!1},handle:(r=t(a().mark((function e(t,r,n){var i,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.reqType.guard(t)){e.next=5;break}return v("Unexpected request type",o.reqType,t),n.status(400),n.send("Invalid request type for route"),e.abrupt("return",Promise.reject("Invalid request type for route"));case 5:return e.next=7,o.func(t,r);case 7:return i=e.sent,(u="function"==typeof o.respType?o.respType(t):o.respType).guard(i)||(v("Unexpected return type",u,i),n.status(500),n.send("Unexpected return type for route")),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)}))),function(e,t,n){return r.apply(this,arguments)}),middlewares:c}},v=function(e,t,r){try{t.check(r)}catch(t){console.log("".concat(e,". \n    Expected:\n     ").concat(t.message," \n    but got:\n     ").concat(JSON.stringify(r)))}};function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e){return d(y(y({},e),{},{roles:[n.ADMIN,n.SUPER_ADMIN].concat(p(e.roles?e.roles:[]))}))};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b,m=function(e){return d(S(S({},e),{},{roles:[n.VIEWER,n.EDITOR,n.ADMIN,n.SUPER_ADMIN].concat(p(e.roles?e.roles:[]))}))},O=function(e){var t=e.reqType,r=e.respType;return function(e){return{reqType:t,respType:r,func:e}}};r(8178),function(e){e.ASSET_STATUS="_dbupdate/_monitor/_asset/+/status",e.ASSET_STATUS_PLATFORM="_dbupdate/_monitor/_asset/+/status/_platform",e.ASSET_LOCATION="_dbupdate/_monitor/_asset/+/location",e.ASSET_LOCATION_PLATFORM="_dbupdate/_monitor/_asset/+/location/_platform",e.ASSET_LOCATION_AND_STATUS="_dbupdate/_monitor/_asset/+/locationAndStatus",e.ASSET_LOCATION_AND_STATUS_PLATFORM="_dbupdate/_monitor/_asset/+/locationAndStatus/_platform",e.AREA_STATUS="_dbupdate/_monitor/_area/+/status",e.AREA_STATUS_PLATFORM="_dbupdate/_monitor/_area/+/status/_platform",e.AREA_LOCATION="_dbupdate/_monitor/_area/+/location",e.AREA_LOCATION_PLATFORM="_dbupdate/_monitor/_area/+/location/_platform",e.EVENTS="_dbupdate/_monitor/_events",e.EVENTS_PLATFORM="_dbupdate/_monitor/_events/_platform",e.ASSET_COMMENTS="_dbupdate/_monitor/_asset_comments"}(b||(b={}));var E,T,R,w,A;function P(e,t){if(null==e)return t;if(u(e)===u(t))return e;try{return JSON.parse(e)}catch(e){return t}}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.FATAL="fatal",e.ERROR="error",e.WARN="warn",e.INFO="info",e.DEBUG="debug",e.TRACE="trace"}(E||(E={})),function(e){e.ACTIONS="actions",e.ACTION_HISTORY="action_history",e.ACTION_TYPES="action_types",e.AREAS="areas",e.AREA_HISTORY="area_history",e.AREA_TYPES="area_types",e.ASSETS="assets",e.ASSET_COMMENTS="asset_comments",e.ASSET_HISTORY="_asset_history",e.ASSET_IMAGE_HISTORY="asset_image_history",e.ASSET_TREES="asset_trees",e.ASSET_TYPES="asset_types",e.ASSET_TYPE_TREE="asset_type_tree",e.EVENTS="events",e.EVENT_HISTORY="event_history",e.EVENT_TYPES="event_types",e.FORGOT_PASSWORD_REQUESTS="forgot_password_requests",e.GROUPS="groups",e.HEATMAP_REPORTS="heatmap_reports",e.LOGS="logs",e.MIGRATIONS="migrations",e.MODELS="models",e.JOBS="jobs",e.NIMBELINK_DATA_AUDIT_TRAIL="nimbelink_data_audit_trail",e.REPORTS="reports",e.DASHBOARDS="dashboards",e.RULES="rules",e.RULE_TYPES="rule_types",e.SUBSCRIPTIONS="subscriptions",e.ROLES="roles",e.ACTION_TYPES_GROUPS="action_types_groups",e.AREA_TYPES_GROUPS="area_types_groups",e.ASSET_TYPES_GROUPS="asset_types_groups",e.EVENT_TYPES_GROUPS="event_types_groups",e.RULE_TYPES_GROUPS="rule_types_groups",e.DASHBOARDS_GROUPS="dashboards_groups",e.SYSTEM_INFO="system_info",e.NEW_USER_ONBOARDING_REQUESTS="new_user_onboarding_requests",e.ADAPTER_CONFIG="adapter_config",e.CUSTOM_SETTINGS="custom_settings"}(T||(T={})),function(e){e.ACCESS_TOKEN_CACHE="AccessTokenCache",e.AREA_TYPE_SCHEMA_CACHE="AreaTypeSchemaCache",e.ASSET_TYPE_CACHE="AssetTypeCache",e.USER_INFO_CACHE="UserInfoCache",e.USER_ROLES_CACHE="UserRolesCache"}(R||(R={})),function(e){e.OVERWRITE="overwrite",e.MERGE="merge"}(w||(w={})),function(e){e.NO="no",e.ALL="all",e.CUSTOM="custom"}(A||(A={})),E.DEBUG,E.DEBUG,E.DEBUG,E.DEBUG,E.DEBUG,w.MERGE,E.DEBUG,r(4769),r(4115),r(5342),r(8188),r(8625),r(8695),r(1939),r(2775),r(6555),r(5094);var I=function(e){var t=e.name;return function(e){return e.client.Cache(t)}};function x(e){return j.apply(this,arguments)}function j(){return(j=t(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return r=e.sent,e.abrupt("return",{error:null,data:r});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:!0,msg:c(e.t0)});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var C,U=function(e){var r=e.cacheFactory,n=e.fetchFactory;return function(){var e,i,o,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{client:ClearBladeAsync},s=u.client,l=r({client:s});return{get:(o=t(a().mark((function e(t){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(l.get(t));case 2:if(!(r=e.sent).error){e.next=5;break}throw r.msg;case 5:if(!r.data){e.next=7;break}return e.abrupt("return",r.data);case 7:return e.next=9,x(n({client:s,cacheKey:t}));case 9:if(!(i=e.sent).error){e.next=12;break}throw new Error(c(i.msg));case 12:return l.set(t,i.data),e.abrupt("return",i.data);case 14:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)}),set:(i=t(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.set(t,r));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)}),delete:(e=t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.delete(t));case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}}},L=U({cacheFactory:I({name:R.USER_INFO_CACHE}),fetchFactory:(C=t(a().mark((function e(t){var r,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.client,n=t.cacheKey,e.next=3,r.Users().read(r.Query().equalTo("user_id",n));case 3:if((i=e.sent)[0]){e.next=6;break}throw new Error("Could not find user with id '".concat(n,"'"));case 6:return e.abrupt("return",(void 0,void 0,void 0,k(k({},o=i[0]),{},{group_ids:P(o.group_ids,[]),terms_agreement:null!==(a=o.terms_agreement)&&void 0!==a?a:{},app_tour:null!==(u=o.app_tour)&&void 0!==u?u:{},user_preferences:null!==(c=o.user_preferences)&&void 0!==c?c:{}})));case 7:case"end":return e.stop()}var o,a,u,c}),e)}))),function(e){return C.apply(this,arguments)})}),B=U({cacheFactory:I({name:R.USER_ROLES_CACHE}),fetchFactory:function(){var e=t(a().mark((function e(t){var r,n,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.client,n=t.cacheKey,e.next=3,r.Roles().grantedTo(n);case 3:return i=e.sent,e.next=6,r.Roles().read(r.Query().andFilter("IN","role_id",i));case 6:return o=e.sent,e.abrupt("return",o.map((function(e){return e.name})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});function D(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G=function(e,t){return void 0===t?e:Object.keys(e).reduce((function(e,r){return void 0===e[r].middlewares&&(e[r].middlewares=t),e}),e)};function Y(e){return{isAdmin:e.includes(n.ADMIN),isViewer:e.includes(n.VIEWER),isEditor:e.includes(n.EDITOR)}}r(8993),r(8123);var z=r(187),V={Number:H(z.Number),Timestamp:H(z.String),JsonB:H,String:H(z.String)};function H(e){return z.Union(e,z.Null)}var Q,J={Number:{my_tag:"number"},String:{my_tag:"string"},StringEnum:function(e){return{my_tag:"string-enum",value:e}},Timestamp:{my_tag:"timestamp"},JsonB:function(e){return{my_tag:"jsonb",value:e}},JsonInString:function(e){return{my_tag:"json-in-string",value:e}},Boolean:{my_tag:"boolean"}},W=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return z.Dictionary(z.Union.apply(z,[z.Undefined].concat(t)))};!function(e){e.SEND_SMS="send_sms",e.SEND_EMAIL="send_email",e.SEND_SLACK_MESSAGE="send_slack_message",e.SEND_TEAMS_MESSAGE="send_teams_message",e.PUBLISH_MESSAGE="publish_message",e.SEND_TO_WEBHOOK="send_to_webhook"}(Q||(Q={}));var K=z.Union(z.Literal(Q.SEND_SMS),z.Literal(Q.SEND_EMAIL),z.Literal(Q.SEND_SLACK_MESSAGE),z.Literal(Q.SEND_TEAMS_MESSAGE),z.Literal(Q.PUBLISH_MESSAGE),z.Literal(Q.SEND_TO_WEBHOOK)),X=(z.Record({user_to_add:z.String,user_firstname:z.String,user_lastname:z.String,added_by:z.String,expires_at:z.String}),z.Record({id:z.Optional(z.String),state:z.Optional(z.String)})),$=W(z.Unknown);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(3108);var te=function(e,t){function r(e){var r=e.handlers,n=Object.keys(t).reduce((function(e,n){var i=t[n];switch(i.my_tag){case"number":e[n]=z.Union(z.Number,z.Null);break;case"string":case"timestamp":e[n]=z.Union(z.String,z.Null);break;case"string-enum":case"jsonb":e[n]=z.Union(i.value,z.Null);break;case"boolean":e[n]=z.Union(z.Boolean,z.Null);break;case"json-in-string":e[n]=z.Union(r.jsonInString(i.value),z.Null)}return e}),{});return n}return{frontend:(n=r({handlers:{jsonInString:function(e){return e}}}),n[e]=z.String,z.Record(n)),frontend_create:function(){var e=r({handlers:{jsonInString:function(e){return e}}});return z.Record(e)}(),backend:function(){var t=r({handlers:{jsonInString:function(){return z.String}}});return t[e]=z.String,z.Record(t)}(),backend_create:function(){var e=r({handlers:{jsonInString:function(){return z.String}}});return z.Record(e)}(),backend_update:function(){var t=r({handlers:{jsonInString:function(){return z.String}}});return t[e]=z.String,z.Record(t)}()};var n};function re(e){return function(e){var t=e.toParsed,r=e.toBackend;return{toParsedCreate:t,toParsed:function(e){return ee(ee({},e),t(e))},toBackendCreate:r,toBackend:function(e){return ee(ee({},e),r(e))}}}}var ne=te("item_id",{name:J.String,config:J.JsonInString($),type:J.StringEnum(K),id:J.String,is_centralized:J.Boolean}),ie=r(8253),oe=r.n(ie);function ae(e){return e?function(e){var t=ClearBladeAsync.Query();return t.Queries=e.Queries,t.RawQuery=e.RawQuery,t.PrimaryKey=e.PrimaryKey,t.PageSize=e.PageSize,t.PageNumber=e.PageNumber,t.Columns=e.Columns,t.Distinct=e.Distinct,t.Order=e.Order,t.GroupBy=e.GroupBy,t}(e):ClearBladeAsync.Query()}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){u=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var se,le,fe=z.Union(z.Literal("theme"),z.Literal("custom")),pe=z.Record({colorType:fe,value:z.String,isDarkMode:z.Boolean}),de=z.Record({uuid:z.String,breakpointValue:z.Number,lightModeColor:pe,darkModeColor:pe}),ve=z.Union(z.String,z.Number,pe,z.Array(de));(le=se||(se={})).TEXT="text",le.NUMBER="number",le.IMAGE="image",le.COLOR="color",le.DATE_TIME="dateTime",le.BOOLEAN="boolean",le.URL="url";var he,ye=z.Union(z.Literal(se.TEXT),z.Literal(se.NUMBER),z.Literal(se.IMAGE),z.Literal(se.COLOR),z.Literal(se.DATE_TIME),z.Literal(se.BOOLEAN),z.Literal(se.URL));!function(e){e.INPUT="input",e.TEXT_AREA="textArea",e.PASSWORD="password",e.NUMBER="number",e.COLOR="color",e.SLIDER="slider",e.DATE_PICKER="datePicker",e.TOGGLE="toggle",e.CHECKBOX="checkbox"}(he||(he={}));var ge,_e=z.Union(z.Literal(he.INPUT),z.Literal(he.TEXT_AREA),z.Literal(he.PASSWORD),z.Literal(he.NUMBER),z.Literal(he.COLOR),z.Literal(he.SLIDER),z.Literal(he.DATE_PICKER),z.Literal(he.TOGGLE),z.Literal(he.CHECKBOX));!function(e){e.GAUGE="gauge",e.HYPERLINK="hyperlink",e.IMAGE="image",e.LABEL="label",e.COLOR="color",e.TOGGLE="toggle",e.DATE_PICKER="datePicker"}(ge||(ge={}));var Se,be=z.Union(z.Literal(ge.GAUGE),z.Literal(ge.HYPERLINK),z.Literal(ge.IMAGE),z.Literal(ge.LABEL),z.Literal(ge.COLOR),z.Literal(ge.TOGGLE),z.Literal(ge.DATE_PICKER)),me=z.Record({uuid:z.String}),Oe=z.Intersect(z.Record({attribute_name:z.String,attribute_label:z.Optional(z.String),attribute_type:ye,attribute_edit_widget:_e,custom_edit_settings:z.Optional(W(ve)),attribute_view_widget:be,custom_view_settings:z.Optional(W(ve)),keep_history:z.Boolean,hide_attribute:z.Boolean,readonly_attribute:z.Boolean}),me);!function(e){e.string="string",e.int="int",e.bool="bool",e.timestamp="timestamp",e.float="float",e.bigint="bigint",e.double="double",e.blob="blob",e.uuid="uuid",e.array="array",e.object="object",e.currency="currency",e.plotline="plotline"}(Se||(Se={}));var Ee=z.Union(z.Literal(Se.string),z.Literal(Se.int),z.Literal(Se.bool),z.Literal(Se.timestamp),z.Literal(Se.float),z.Literal(Se.bigint),z.Literal(Se.double),z.Literal(Se.blob),z.Literal(Se.uuid),z.Literal(Se.array),z.Literal(Se.object),z.Literal(Se.currency),z.Literal(Se.plotline)),Te=["includeTrees"],Re=["includeTrees"];function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e){var t,r,n,i,o,a,u,c,s,l=e.includeTrees,f=ce(e,Te);return l?(r=(t=Ae({},f)).query,n=t.groupIds,i=t.collectionName,o=t.collectionColumns,a=t.columnType,c=(u=r.Order[0])&&u.OrderKey,s="SELECT COUNT(*) FROM (",s+="SELECT tree_id".concat(ke(u,o,a)," FROM ").concat(i," WHERE "),s+=Ie(n,r.Queries,o,c),s+=" GROUP BY tree_id",s+=") tmp"):function(e){var t,r=e.query,n=e.groupIds,i=e.collectionName,o=e.collectionColumns,a="SELECT COUNT(*) FROM ".concat(i," WHERE ");return(a+=Ie(n,r.Queries,o))+Le(null===(t=r.Order[0])||void 0===t?void 0:t.OrderKey,o)}(Ae({},f))}function Ne(e){var t,r,n,i,o,a,u,c,s,l,f,p=e.includeTrees,d=ce(e,Re);return p?(r=(t=Ae({},d)).query,n=t.groupIds,i=t.collectionName,o=t.collectionColumns,a=t.columnType,u=r.Columns,l=(s=(c=r.Order[0])&&c.OrderKey)&&Qe(o,s),f="SELECT ".concat(u.length?u.join(","):"*"," FROM ").concat(i," root "),f+="INNER JOIN (SELECT tree_id".concat(ke(c,o,a)," FROM ").concat(i," WHERE "),f+=Ie(n,r.Queries,o,s),f+=" GROUP BY tree_id",f+=Be(r.Order[0],o,a,l?s:s?"custom_".concat(s):void 0),f+=De(r.PageSize),f+=Me(r.PageSize,r.PageNumber),f+=") child ON root.tree_id = child.tree_id",f+=Be(r.Order[0],o,a)):function(e){var t=e.query,r=e.groupIds,n=e.collectionName,i=e.collectionColumns,o=e.columnType,a=t.Columns,u=t.Order[0],c=u&&u.OrderKey,s="SELECT ".concat(a.length?a.join(","):"*"," FROM ").concat(n," WHERE ");return s+=Ie(r,t.Queries,i,c),s+=Be(t.Order[0],i,o),(s+=De(t.PageSize))+Me(t.PageSize,t.PageNumber)}(Ae({},d))}function ke(e,t,r){if(!e)return"";var n=e&&e.OrderKey,i=e&&e.SortOrder,o=Ge(n,r),a=qe(n,r),u=Qe(t,n);return", ".concat(!0===i?"MIN":"MAX","(")+(u&&o?"".concat(Ue(n),") AS ").concat(n):u?"LOWER(".concat(Ce(n),")) AS ").concat(n):o||a?"".concat(n,") AS custom_").concat(n):"LOWER(".concat(n,")) AS custom_").concat(n))}function Ie(e,t,r,n){var i="(group_id IN ".concat(He(e));return t.length&&(i+=" AND (".concat(function(e,t){for(var r="",n=0;n<e.length;n++)r+=je(e[n],t),n<e.length-1&&(r+=" OR ");return r}(t,r),")")),(i+=Le(n,r))+")"}function xe(e){var t=e.Field,r=e.Operator,n=e.Value,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{customDataCol:!1},o=i.customDataCol;switch(r){case"=":return o?"".concat(Ce(t)," ").concat(r," ").concat("string"==typeof n?Ve(JSON.stringify(n)):"'".concat(n,"'")):"".concat(t," ").concat(r," ").concat(Ve(JSON.stringify(n)));case">":case"<":case">=":case"<=":return o?"".concat(Ue(t)," ").concat(r," ").concat(n):"".concat(t," ").concat(r," ").concat(Ye(JSON.stringify(n)));case"!=":return o?"".concat(Ce(t)," <> ").concat("string"==typeof n?Ve(JSON.stringify(n)):"'".concat(n,"'")):null===n?"".concat(t," IS NOT NULL"):"".concat(t," <> ").concat(Ve(JSON.stringify(n)));case"ILIKE":return o?"LOWER(".concat(Ce(t),") LIKE LOWER(").concat(Ve(JSON.stringify(n)),")"):"LOWER(".concat(t,") LIKE LOWER(").concat(Ve(JSON.stringify(n)),")");case"IN":return o?"".concat(Ce(t)," IN ").concat(He(n)):"".concat(t," IN ").concat(He(n));default:throw new Error("Invalid Operator '".concat(r,"' passed to createConditionFromQuery"))}}function je(e,t){for(var r="(",n=0;n<e.length;n++){var i=Qe(t,e[n].Field);r+=xe(e[n],{customDataCol:i}),n<e.length-1&&(r+=" AND ")}return"".concat(r,")")}function Ce(e){return"CAST(coalesce(nullif(custom_data, ''), '{}') AS json) ->> '".concat(e,"'")}function Ue(e){return"CAST(nullif(".concat(Ce(e),", '') AS decimal)")}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e&&Qe(t,e)?" AND ".concat(Ce(e)," is not null"):""}function Be(e,t,r,n){if(!e)return"";var i=e.SortOrder,o=e.OrderKey,a=Ge(o,r),u=qe(o,r),c=Qe(t,o);return" ORDER BY ".concat(n||(c&&a?Ue(o):c?"LOWER(".concat(Ce(o),")"):a||u?o:"LOWER(".concat(o,")"))," ").concat(!0===i?"ASC":"DESC")}function De(e){return" LIMIT ".concat(e)}function Fe(e,t){return(0===t?0:t-1)*e}function Me(e,t){return" OFFSET ".concat(Fe(e,t))}function qe(e,t){return!!e&&t===Se.timestamp}function Ge(e,t){return!!e&&(t===se.NUMBER||t===Se.bigint||t===Se.double||t===Se.float||t===Se.int)}function Ye(e){return e.replace(/"/g,"'")}function ze(e){return e.replace(/'/g,"''")}function Ve(e){return Ye(ze(e))}function He(e){return"(".concat(e.map((function(e){return"'".concat(ze(e),"'")})).join(","),")")}function Qe(e,t){return!e.filter((function(e){return e===t})).length}function Je(e,t,r){var n=t.table,i=e.clone().from(n);return{count:i.clone().field("COUNT(".concat(n,".*)")),rows:i.clone().fields(r?r.map((function(e){return"".concat(n,".").concat(e)})):["".concat(n,".*")])}}function We(e,t){return oe().expr().and("".concat(e," IN ?"),t).toString()}function Ke(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=t(a().mark((function e(t){var r,n,i,o,u,c,s,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.client,n=t.queries,i=n.rows,o=n.count,u=r.Database(),e.next=4,Promise.all([u.query($e(i)),u.query($e(o))]);case 4:return c=e.sent,s=ue(c,2),l=s[0],f=s[1],e.abrupt("return",{rows:l,count:f[0].count});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e){return"string"==typeof e?e:e.toString()}var Ze,et=function(e){var r=e.createQueries,n=function(){var e=t(a().mark((function e(t){var n,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,i=t.client,e.next=3,x(Ke({client:i,queries:r({user:n})}));case 3:if(!(o=e.sent).error){e.next=6;break}throw o.msg;case 6:return e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n},tt=function(e,t){var r=t.table,n=ae(t.query);return et({createQueries:function(t){return function(e,t){var r=t.table,n=t.query,i=function(e,t){var r=e.clone(),n=oe().expr();return t.Queries.forEach((function(e){var t=oe().expr();e.forEach((function(e){t.and(xe(e))})),n.or(t)})),r.where(n),r}(e,n),o=Je(i,{table:r},n.Columns),a=o.count,u=o.rows;return u.limit(n.PageSize).offset(Fe(n.PageSize,n.PageNumber)),n.Order.forEach((function(e){u.order(e.OrderKey,e.SortOrder)})),{count:a,rows:u}}(e(t),{table:r,query:n})}})},rt=z.Record({PrimaryKey:z.Array(z.String),Order:z.Array(z.Record({SortOrder:z.Boolean,OrderKey:z.String})),PageSize:z.Number,PageNumber:z.Number,Queries:z.Array(z.Array(z.Record({Operator:z.String,Field:z.String,Value:z.Unknown}))),Columns:z.Array(z.String),Distinct:z.String,GroupBy:z.Array(z.String),RawQuery:z.String}),nt=z.Record({query:z.Optional(rt)}),it=function(e){return z.Record({DATA:z.Array(e),COUNT:z.Number})},ot={reqType:nt,createRespType:it,createQueryableRespType:function(e){return function(t){return t.query&&t.query.Columns.length>0?it(e.pick.apply(e,p(t.query.Columns))):it(e)}},convertResp:function(e){var t=e.count;return{DATA:e.rows,COUNT:t}}},at=O({reqType:ot.reqType,respType:ot.createQueryableRespType(ne.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where(oe().expr().and("".concat(T.ACTIONS,".type IN ?"),oe().select().field("id").from(T.ACTION_TYPES).where(oe().expr().and("".concat(T.ACTION_TYPES,".id IN ?"),oe().select().field("action_type_id").from(T.ACTION_TYPES_GROUPS).where(We("".concat(T.ACTION_TYPES_GROUPS,".group_id"),t))))))}),{table:T.ACTIONS,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),ut=(r(3450),r(8022));!function(e){e.EMAIL="email",e.PHONE="phone"}(Ze||(Ze={}));var ct,st=z.Union(z.Literal(Ze.EMAIL),z.Literal(Ze.PHONE));!function(e){e.TEXT="text",e.TEXT_AREA="textarea",e.EMAIL="email",e.TELEPHONE="tel",e.USER_LIST="userList",e.TYPEAHEAD="typeahead",e.JSON="json",e.DYNAMIC="dynamic"}(ct||(ct={}));var lt=z.Union(z.Literal(ct.TEXT),z.Literal(ct.TEXT_AREA),z.Literal(ct.EMAIL),z.Literal(ct.TELEPHONE),z.Literal(ct.USER_LIST),z.Literal(ct.TYPEAHEAD),z.Literal(ct.JSON),z.Literal(ct.DYNAMIC)),ft=z.Record({uuid:z.String,targetValue:z.String,input:lt}),pt=z.Record({target_field:z.String,default:lt,options:z.Array(ft)}),dt=z.Record({uuid:z.String,label:z.String,value:z.String}),vt=z.Intersect(z.Record({allow_multiple:z.Boolean,displayName:z.String,input:lt,name:z.String,placeholder:z.String,required:z.Boolean,user_value:z.Optional(st),dynamic_config:z.Optional(pt),typeahead_options:z.Optional(z.Array(dt))}),me);function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var gt=te("item_id",{id:J.String,label:J.String,schema:J.JsonInString(z.Array(vt))}),_t=(re()({toParsed:function(e){var t=P(e.schema,[]).map((function(e){return e.uuid||(e.uuid=(0,ut.v4)()),e}));return yt(yt({},e),{},{schema:t})},toBackend:function(e){return yt(yt({},e),{},{schema:JSON.stringify(e.schema)})}}),O({reqType:ot.reqType,respType:ot.createQueryableRespType(gt.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where(oe().expr().and("".concat(T.ACTION_TYPES,".id IN ?"),oe().select().field("action_type_id").from(T.ACTION_TYPES_GROUPS).where(We("".concat(T.ACTION_TYPES_GROUPS,".group_id"),t))))}),{table:T.ACTION_TYPES,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),St=te("item_id",{topic_root:J.String,edge_name:J.String,adapter_settings:J.JsonInString(z.Dictionary(z.Unknown)),adapter_name:J.String,adapter_type:J.String}),bt=O({reqType:ot.reqType,respType:ot.createQueryableRespType(St.backend)})((function(e,t){var r=e.query;return tt((function(){return oe().select()}),{table:T.ADAPTER_CONFIG,query:r})(t).then(ot.convertResp)})),mt=(r(8145),te("item_id",{id:J.String,custom_data:J.JsonInString(W(z.String,z.Number,z.Boolean)),description:J.String,image:J.String,label:J.String,last_updated:J.Timestamp,owners:J.JsonInString(z.Array(z.String)),parent:J.String,type:J.String,geometry_type:J.String,geometry_x_lat:J.Number,geometry_y_long:J.Number,geometry_z_elev:J.Number,polygon:J.JsonInString(z.Union(z.Array(z.Record({long:z.Number,lat:z.Number})),z.Array(z.Record({x:z.Number,y:z.Number,z:z.Number})))),assets:J.JsonInString(z.Array(z.String)),latitude:J.Number,longitude:J.Number,group_id:J.String})),Ot=function(e){var r=e.collection,n=e.includeTrees,i=e.columnType,o=e.query;return function(){var e=t(a().mark((function e(t){var u,c,s,l,f,p,d,v,h,y;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.user.groups,c=t.client,e.next=3,x(c.Collection(r).columns());case 3:if(!(s=e.sent).error){e.next=6;break}throw s.msg;case 6:return l=s.data.map((function(e){return e.ColumnName})),f=ae(o),p=Pe({query:f,groupIds:u,collectionName:r,collectionColumns:l,includeTrees:!!n,columnType:i}),d=Ne({query:f,groupIds:u,collectionName:r,collectionColumns:l,includeTrees:!!n,columnType:i}),e.next=12,x(Promise.all([c.Database().query(d),c.Database().query(p)]));case 12:if(!(v=e.sent).error){e.next=15;break}throw v.msg;case 15:return h=v.data[0],y=v.data[1][0].count,e.abrupt("return",{rows:h,count:y});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Rt,wt=O({reqType:ot.reqType.extend({columnType:z.Optional(z.Union(Ee,ye))}),respType:ot.createQueryableRespType(mt.backend)})(function(){var e=t(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ot(Tt({collection:T.AREAS},t))(r).then(ot.convertResp));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());!function(e){e.FIRE_AND_FORGET="fire_and_forget"}(Rt||(Rt={}));var At=z.Union(z.Literal(Rt.FIRE_AND_FORGET)),Pt=z.Intersect(z.Record({id:z.String,type:At,widget_type:z.String,widget_settings:z.Unknown}),me);function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var It=z.Record({propagate_location_to_root:z.Optional(z.Boolean),store_updates_on_root:z.Optional(z.Boolean),show_location_on_map:z.Optional(z.Boolean)}),xt=z.Record({type:z.Literal("mui"),iconKey:z.String}),jt=z.Record({type:z.Literal("svg"),svg:z.String}),Ct=z.Union(xt,jt),Ut=te("item_id",{id:J.String,label:J.String,description:J.String,icon:J.String,schema:J.JsonInString(z.Array(Oe)),controls_schema:J.JsonInString(z.Array(Pt)),device_type:J.String,parent_child_options:J.JsonB(It),icon_svg:J.JsonB(Ct.Or(z.Null)),default_history_view:J.String});function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}re()({toParsed:function(e){var t;return kt(kt({},e),{},{parent_child_options:null!==(t=e.parent_child_options)&&void 0!==t?t:{},schema:P(e.schema,[]),controls_schema:P(e.controls_schema,[])})},toBackend:function(e){return kt(kt({},e),{},{parent_child_options:e.parent_child_options,schema:JSON.stringify(e.schema),controls_schema:JSON.stringify(e.controls_schema)})}});var Dt,Ft=te("item_id",{id:J.String,label:J.String,description:J.String,schema:J.JsonInString(z.Array(Oe)),icon:J.String,icon_svg:J.JsonB(Ct.Or(z.Null)),default_history_view:J.String}),Mt=(re()({toParsed:function(e){return Bt(Bt({},e),{},{schema:P(e.schema,[])})},toBackend:function(e){return Bt(Bt({},e),{},{schema:JSON.stringify(e.schema)})}}),O({reqType:ot.reqType,respType:ot.createQueryableRespType(Ft.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where(oe().expr().and("".concat(T.AREA_TYPES,".id IN ?"),oe().select().field("area_type_id").from(T.AREA_TYPES_GROUPS).where(We("".concat(T.AREA_TYPES_GROUPS,".group_id"),t))))}),{table:T.AREA_TYPES,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));!function(e){e.BOLD="bold",e.ITALICS="italic",e.UNDERLINE="underline",e.SUPERSCRIPT="superscript",e.SUBSCRIPT="subscript",e.STRIKETHROUGH="strikethrough"}(Dt||(Dt={}));var qt,Gt=z.Union(z.Literal(Dt.BOLD),z.Literal(Dt.ITALICS),z.Literal(Dt.UNDERLINE),z.Literal(Dt.SUPERSCRIPT),z.Literal(Dt.SUBSCRIPT),z.Literal(Dt.STRIKETHROUGH));!function(e){e.PARAGRAPH="paragraph",e.UNORDERED_LIST="bulleted-list",e.HEADING_1="heading-one",e.HEADING_2="heading-two",e.HEADING_3="heading-three",e.LIST_ITEM="list-item",e.ORDERED_LIST="numbered-list",e.CODE="code",e.IMAGE="image"}(qt||(qt={}));var Yt=z.Union(z.Literal(qt.PARAGRAPH),z.Literal(qt.UNORDERED_LIST),z.Literal(qt.HEADING_1),z.Literal(qt.HEADING_2),z.Literal(qt.HEADING_3),z.Literal(qt.LIST_ITEM),z.Literal(qt.ORDERED_LIST),z.Literal(qt.CODE)),zt=z.Intersect(z.Dictionary(z.Boolean,Gt),z.Record({text:z.String})),Vt=z.Record({type:z.Literal(qt.IMAGE),children:z.Array(zt),url:z.Optional(z.String),id:z.Optional(z.String)}),Ht=z.Record({type:Yt,children:z.Array(zt)}),Qt=z.Union(Vt,Ht,zt),Jt=te("item_id",{asset_id:J.String,timestamp:J.Timestamp,comment:J.JsonB(z.Array(Qt)),image_ids:J.JsonB(z.Array(z.String)),commenter_id:J.String,is_edited:J.Boolean}),Wt=O({reqType:ot.reqType,respType:ot.createQueryableRespType(Jt.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where(oe().expr().and("".concat(T.ASSET_COMMENTS,".asset_id IN ?"),oe().select().field("".concat(T.ASSETS,".id")).from(T.ASSETS).where(We("".concat(T.ASSETS,".group_id"),t))))}),{table:T.ASSET_COMMENTS,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Kt=te("item_id",{asset_id:J.String,upload_datetime:J.Timestamp,image_id:J.String,last_modified:J.Timestamp,name:J.String}),Xt=O({reqType:ot.reqType,respType:ot.createQueryableRespType(Kt.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where(oe().expr().and("".concat(T.ASSET_IMAGE_HISTORY,".asset_id IN ?"),oe().select().field("".concat(T.ASSETS,".id")).from(T.ASSETS).where(We("".concat(T.ASSETS,".group_id"),t))))}),{table:T.ASSET_IMAGE_HISTORY,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),$t=te("item_id",{id:J.String,owners:J.JsonInString(z.Array(z.String)),latitude:J.Number,longitude:J.Number,type:J.String,label:J.String,description:J.String,image:J.String,last_updated:J.Timestamp,location_updated:J.Timestamp,custom_data:J.JsonInString(W(z.String,z.Number,z.Boolean)),attributes_last_updated:J.JsonB(W(z.String)),parent:J.String,location_x:J.Number,location_y:J.Number,location_z:J.Number,location_type:J.String,location_unit:J.String,custom_id_1:J.String,custom_id_2:J.String,last_location_updated:J.Timestamp,group_id:J.String,tree_id:J.String,is_root:J.Boolean});function Zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var tr,rr=O({reqType:z.Intersect(ot.reqType,z.Record({includeTrees:z.Optional(z.Boolean),columnType:z.Optional(z.Union(Ee,ye))})),respType:ot.createQueryableRespType($t.backend)})(function(){var e=t(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ot(er({collection:T.ASSETS},t))(r).then(ot.convertResp));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),nr=O({reqType:ot.reqType,respType:ot.createQueryableRespType($t.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where("".concat(T.ASSETS,".group_id IN ?"),t).where(oe().expr().or("".concat(T.ASSETS,".is_root = true")).or("".concat(T.ASSETS,".type IN ?"),oe().select().from(T.ASSET_TYPES).field("id").where("(parent_child_options->>'show_location_on_map') = 'true'")))}),{table:T.ASSETS,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),ir=(r(7233),r(8673),r(5735),r(3244),r(6886),r(6426),z.Record({id:z.String,parentID:z.String,children:z.Array(z.String)})),or=z.Record({rootID:z.String,treeID:z.String,nodes:z.Dictionary(ir)}),ar=W(ir),ur=z.Record({rootID:z.String,treeID:z.String,nodes:ar}),cr=z.Record({item_id:z.String,id:z.String,tree:ur}),sr=te("item_id",{id:J.String,tree:J.JsonInString(or)}),lr=O({reqType:ot.reqType,respType:ot.createQueryableRespType(sr.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where("".concat(T.ASSET_TREES,".id IN ?"),oe().select().field("tree_id").from(T.ASSETS).where("".concat(T.ASSETS,".group_id IN ?"),t))}),{table:T.ASSET_TREES,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),fr=O({reqType:ot.reqType,respType:ot.createQueryableRespType(Ut.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where(oe().expr().and("".concat(T.ASSET_TYPES,".id IN ?"),oe().select().field("asset_type_id").from(T.ASSET_TYPES_GROUPS).where(We("".concat(T.ASSET_TYPES_GROUPS,".group_id"),t))))}),{table:T.ASSET_TYPES,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),pr=z.Record({id:z.String,name:z.String}).extend({type:z.Literal("collection"),collectionName:z.String});z.Record({dataSources:z.Array(pr),query:rt,label:z.String}),function(e){e.TIME="TIME",e.ITEMS="ITEM",e.TABULAR="TABULAR",e.CONTROL="CONTROL",e.INDICATOR="INDICATOR",e.PERCENTAGE="PERCENTAGE"}(tr||(tr={}));var dr=z.Union(z.Literal(tr.TIME),z.Literal(tr.ITEMS),z.Literal(tr.TABULAR),z.Literal(tr.CONTROL),z.Literal(tr.INDICATOR),z.Literal(tr.PERCENTAGE)),vr=z.Record({id:z.String,description:z.String,header:z.String,dataSources:z.Array(pr)}).extend({visualization:z.Record({type:z.String,purpose:dr}),version:z.String,queries:z.Unknown,settings:z.Unknown});function hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var gr=z.Record({version:z.Union(z.Literal("1.0.0")),id:z.String,header:z.String,controlLayouts:z.Unknown,mainLayouts:z.Unknown,widgets:z.Array(vr)}),_r=te("item_id",{version:J.StringEnum(z.Union(z.Literal("1.0.0"))),id:J.String,label:J.String,last_updated:J.String,last_updated_by:J.String,pages:J.JsonB(z.Array(gr)),description:J.String}),Sr=(re()({toParsed:function(e){return yr({},e)},toBackend:function(e){return yr({},e)}}),O({reqType:ot.reqType,respType:ot.createQueryableRespType(_r.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where(oe().expr().and("".concat(T.DASHBOARDS,".id IN ?"),oe().select().field("dashboard_id").from(T.DASHBOARDS_GROUPS).where(We("".concat(T.DASHBOARDS_GROUPS,".group_id"),t))))}),{table:T.DASHBOARDS,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),br=z.Dictionary(z.Record({last_updated:V.Timestamp,last_location_updated:z.Optional(V.Timestamp)})),mr=te("item_id",{event_id:J.String,timestamp:J.Timestamp,transition_attribute:J.String,transition_value:J.String,updated_by:J.String,assets:J.JsonB(br),areas:J.JsonB(br)}),Or=O({reqType:ot.reqType,respType:ot.createQueryableRespType(mr.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where("".concat(T.EVENT_HISTORY,".event_id IN ?"),oe().select({parameterCharacter:"^"}).field("id").from(T.EVENTS).where("CAST(coalesce(nullif(assets, ''), '{}') AS jsonb) ?| (^)",oe().select().field("array_agg(id)").from(T.ASSETS).where(We("".concat(T.ASSETS,".group_id"),t))))}),{table:T.EVENT_HISTORY,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Er=z.Intersect($t.frontend,z.Record({treeAssets:z.Optional(z.Array($t.frontend)),tree:z.Optional(cr)})),Tr=te("item_id",{created_at:J.Timestamp,last_updated:J.Timestamp,is_open:J.Boolean,label:J.String,severity:J.Number,id:J.String,description:J.String,type:J.String,state:J.String,priority:J.Number,action_ids:J.JsonInString(z.Array(z.String)),rule_id:J.String,assets:J.JsonInString(W(Er)),areas:J.JsonInString(W(mt.frontend))}),Rr=O({reqType:ot.reqType,respType:ot.createQueryableRespType(Tr.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select({parameterCharacter:"^"}).where("CAST(coalesce(nullif(assets, ''), '{}') AS jsonb) ?| (^)",oe().select().field("array_agg(id)").from(T.ASSETS).where(We("".concat(T.ASSETS,".group_id"),t)))}),{table:T.EVENTS,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),wr=z.Intersect(z.Record({state:z.String}),me);function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nr,kr=te("item_id",{action_types:J.JsonInString(z.Array(z.String)),closed_states:J.JsonInString(z.Array(wr)),description:J.String,has_lifecycle:J.Boolean,id:J.String,label:J.String,open_states:J.JsonInString(z.Array(wr)),priority:J.Number,severity:J.Number}),Ir=(re()({toParsed:function(e){var t=P(e.open_states,[]).map((function(e){return{state:e,uuid:(0,ut.v4)()}})),r=P(e.closed_states,[]).map((function(e){return{state:e,uuid:(0,ut.v4)()}}));return Pr(Pr({},e),{},{action_types:P(e.action_types,[]),open_states:t,closed_states:r})},toBackend:function(e){return Pr(Pr({},e),{},{action_types:e.action_types?JSON.stringify(e.action_types):"[]",open_states:e.open_states&&e.has_lifecycle?JSON.stringify(e.open_states.map((function(e){return e.state}))):"[]",closed_states:e.closed_states&&e.has_lifecycle?JSON.stringify(e.closed_states.map((function(e){return e.state}))):"[]"})}}),O({reqType:ot.reqType,respType:ot.createQueryableRespType(kr.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where(oe().expr().and("".concat(T.EVENT_TYPES,".id IN ?"),oe().select().field("event_type_id").from(T.EVENT_TYPES_GROUPS).where(We("".concat(T.EVENT_TYPES_GROUPS,".group_id"),t))))}),{table:T.EVENT_TYPES,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),xr=z.Record({long:z.Number,lat:z.Number}),jr=te("item_id",{map_location_latitude:J.String,map_location_longitude:J.String,map_bounds:J.JsonB(z.Array(xr)),id:J.String,map_zoom:J.Number,map_zoom_float:J.Number,name:J.String}),Cr=O({reqType:ot.reqType,respType:ot.createQueryableRespType(jr.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user,r=t.groups;return t.permissions.isAdmin?oe().select():oe().select().where(oe().expr().and(We("".concat(T.GROUPS,".id"),r)))}),{table:T.GROUPS,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Ur=O({reqType:z.Record({id:z.String}),respType:ot.createRespType(jr.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.abrupt("return",et({createQueries:function(){return Je(oe().select().where(oe().expr().and("".concat(T.GROUPS,".id IN ?"),oe().select().field("group_id").from(T.ACTION_TYPES_GROUPS).where("action_type_id = ?",n))),{table:T.GROUPS})}})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Lr=O({reqType:z.Record({id:z.String}),respType:ot.createRespType(jr.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.abrupt("return",et({createQueries:function(){return Je(oe().select().where(oe().expr().and("".concat(T.GROUPS,".id IN ?"),oe().select().field("group_id").from(T.AREA_TYPES_GROUPS).where("area_type_id = ?",n))),{table:T.GROUPS})}})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Br=O({reqType:z.Record({id:z.String}),respType:ot.createRespType(jr.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.abrupt("return",et({createQueries:function(){return Je(oe().select().where(oe().expr().and("".concat(T.GROUPS,".id IN ?"),oe().select().field("group_id").from(T.ASSET_TYPES_GROUPS).where("asset_type_id = ?",n))),{table:T.GROUPS})}})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Dr=O({reqType:z.Unknown,respType:ot.createRespType(jr.backend)})(function(){var e=t(a().mark((function e(t,r){var n,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.client,i=r.user.groups,e.next=3,n.Collection(T.GROUPS).fetch(n.Query().andFilter("IN","id",i));case 3:return o=e.sent,e.abrupt("return",ot.convertResp({count:o.TOTAL,rows:o.DATA.sort((function(e,t){return i.indexOf(e.id)-i.indexOf(t.id)}))}));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Fr=O({reqType:z.Record({id:z.String}),respType:ot.createRespType(jr.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.abrupt("return",et({createQueries:function(){return Je(oe().select().where(oe().expr().and("".concat(T.GROUPS,".id IN ?"),oe().select().field("group_id").from(T.DASHBOARDS_GROUPS).where("dashboard_id = ?",n))),{table:T.GROUPS})}})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Mr=O({reqType:z.Record({id:z.String}),respType:ot.createRespType(jr.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.abrupt("return",et({createQueries:function(){return Je(oe().select().where(oe().expr().and("".concat(T.GROUPS,".id IN ?"),oe().select().field("group_id").from(T.EVENT_TYPES_GROUPS).where("event_type_id = ?",n))),{table:T.GROUPS})}})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),qr=O({reqType:z.Record({id:z.String}),respType:ot.createRespType(jr.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.abrupt("return",et({createQueries:function(){return Je(oe().select().where(oe().expr().and("".concat(T.GROUPS,".id IN ?"),oe().select().field("group_id").from(T.RULE_TYPES_GROUPS).where("rule_type_id = ?",n))),{table:T.GROUPS})}})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());r(9120),r(5713),function(e){e[e.ONE_DAY=1]="ONE_DAY",e[e.ONE_WEEK=7]="ONE_WEEK",e[e.ONE_MONTH=30]="ONE_MONTH",e[e.CUSTOM=0]="CUSTOM",e[e.MOST_RECENT=-1]="MOST_RECENT"}(Nr||(Nr={}));var Gr,Yr,zr=z.Union(z.Literal(Nr.ONE_DAY),z.Literal(Nr.ONE_WEEK),z.Literal(Nr.ONE_MONTH),z.Literal(Nr.CUSTOM),z.Literal(Nr.MOST_RECENT)),Vr=z.Record({startDate:z.String,endDate:z.String,rangeSelection:zr});!function(e){e.numerical="numerical"}(Gr||(Gr={})),function(e){e.MIN="MIN",e.MAX="MAX",e.AVG="AVG"}(Yr||(Yr={}));var Hr,Qr=z.Union(z.Literal(Yr.MIN),z.Literal(Yr.MAX),z.Literal(Yr.AVG)),Jr=z.Record({statistic:Qr,range:z.Union(z.Record({enabled:z.Literal(!0),minMax:z.Tuple(z.Number,z.Number)}),z.Record({enabled:z.Literal(!1)}))}),Wr=z.Record({type:z.Literal(Gr.numerical),analysis:Jr}),Kr=z.Union(Wr);!function(e){e.area="area",e.bounds="bounds"}(Hr||(Hr={}));var Xr,$r,Zr=z.Record({type:z.Literal(Hr.area),ids:z.Array(z.String)}),en=z.Tuple(z.Number,z.Number,z.Number,z.Number),tn=z.Record({type:z.Literal(Hr.bounds),bounds:en}),rn=z.Union(Zr,tn),nn=te("item_id",{id:J.String,label:J.String,group_id:J.String,asset_type:J.String,attribute_name:J.String,location:J.JsonB(rn),analysis:J.JsonB(Kr),date_range:J.JsonB(Vr),created_on:J.String,created_by:J.String}),on=O({reqType:ot.reqType,respType:ot.createQueryableRespType(nn.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where(We("".concat(T.HEATMAP_REPORTS,".group_id"),t))}),{table:T.HEATMAP_REPORTS,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),an=O({reqType:z.Record({id:z.String}),respType:z.String})(function(){var e=t(a().mark((function e(t,r){var n,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,i=r.client,o=i.FS("ia-images"),e.next=5,o.readFile("/sandbox/".concat(n),"utf8");case 5:return u=e.sent.toString(),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),un=z.Record({retrain_requirement_file_name:z.String,retrain_scripts_names:z.Array(z.String),additional_input_folder_name:z.String}),cn=te("item_id",{id:J.String,base_model_id:J.String,name:J.String,model_name:J.String,queries:J.JsonB(z.Array(z.String)),evaluations:J.JsonB(z.Array(z.String)),training_files_info:J.JsonB(un),trained_model_ids:J.JsonB(z.Array(z.String)),fit_on_new_data_only:J.Boolean,status:J.JsonB(z.Record({state:z.String,timestamp:z.String,message:z.String})),training_edge:J.String}),sn=O({reqType:ot.reqType,respType:ot.createQueryableRespType(cn.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(){return oe().select()}),{table:T.JOBS,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),ln=z.String.withBrand("StringBranded").check("key"),fn=(z.Record(s({},ln,z.String)),te("item_id",{name:J.String,id:J.String,edges:J.JsonB(z.Array(z.String)),job_name:J.String,is_history:J.Boolean})),pn=O({reqType:ot.reqType,respType:ot.createQueryableRespType(fn.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(){return oe().select()}),{table:T.MODELS,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),dn=z.Intersect(Tr.backend,z.Record({rule_label:z.String})),vn=O({reqType:z.Record({}),respType:ot.createRespType(dn)})(function(){var e=t(a().mark((function e(t,r){var n,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.client,i=oe().select().from(T.EVENTS).field("".concat(T.EVENTS,".*, ").concat(T.RULES,".label as rule_label")).join("".concat(T.RULES," ON ").concat(T.EVENTS,".rule_id=").concat(T.RULES,".id")).where("".concat(T.EVENTS,".is_open=true")),e.next=4,n.Database().query(i.toString());case 4:return o=e.sent,e.abrupt("return",ot.convertResp({count:o.length,rows:o}));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());!function(e){e.assetTree="assetTree",e.assetTypeTree="assetTypeTree"}(Xr||(Xr={})),function(e){e.SECOND="SECOND",e.MINUTE="MINUTE",e.HOUR="HOUR",e.DAY="DAY",e.WEEK="WEEK",e.MONTH="MONTH",e.YEAR="YEAR"}($r||($r={}));var hn,yn=z.Record({amount:z.Number,units:z.Union(z.Literal($r.SECOND),z.Literal($r.MINUTE),z.Literal($r.HOUR),z.Literal($r.DAY),z.Literal($r.WEEK),z.Literal($r.MONTH),z.Literal($r.YEAR))});!function(e){e.ADVANCED="advanced",e.HEATMAP="heatmap"}(hn||(hn={}));var gn,_n=z.Record({type:z.Literal("AMOUNT_OF_TIME"),value:yn}),Sn=z.Record({type:z.Literal("REPEAT_NONE"),value:yn}),bn=z.Record({type:z.Literal("email"),email:z.String}),mn=z.Record({id:z.String,label:z.String,email_subject:z.String,email_body:z.String,email_recipients:z.Array(bn),report_time_range:_n,start_date:z.String,end_date:z.String,repeat:z.Union(Sn,_n)}),On=te("item_id",{id:J.String,label:J.String,code_service_name:J.String,group_id:J.String,schedules:J.JsonB(z.Array(mn)),type:J.String,created_on:J.String,created_by:J.String}),En=O({reqType:ot.reqType,respType:ot.createQueryableRespType(On.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where(We("".concat(T.REPORTS,".group_id"),t))}),{table:T.REPORTS,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Tn=z.Record({role_id:z.String,name:z.String,description:z.String}),Rn=O({reqType:ot.reqType,respType:ot.createQueryableRespType(Tn)})(function(){var e=t(a().mark((function e(t,r){var n,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.client,i=ae(t.query),e.next=4,x(n.Roles().read(i));case 4:if(!(o=e.sent).error){e.next=7;break}throw o.msg;case 7:return e.abrupt("return",ot.convertResp({rows:o.data,count:4}));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),wn=O({reqType:z.Record({user_id:z.String}),respType:z.Array(Tn)})(function(){var e=t(a().mark((function e(t,r){var i,o,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.client,e.next=3,i.Roles().grantedTo(t.user_id);case 3:return o=e.sent,e.next=6,i.Roles().read(i.Query().andFilter("IN","role_id",o));case 6:return u=e.sent,c=Object.values(n),e.abrupt("return",u.filter((function(e){return c.indexOf(e.name)>-1})));case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());!function(e){e.VALUE="value",e.PERCENT_CHANGE="percent",e.NUMERIC_CHANGE="numeric"}(gn||(gn={}));var An,Pn,Nn=z.Union(z.Literal(gn.VALUE),z.Literal(gn.PERCENT_CHANGE),z.Literal(gn.NUMERIC_CHANGE));!function(e){e.REPEATEACHWEEK="repeatEachWeek",e.REPEATBYDAY="repeatByDay",e.ALWAYS=""}(An||(An={})),function(e){e.SUNDAY="sunday",e.MONDAY="monday",e.TUESDAY="tuesday",e.WEDNESDAY="wednesday",e.THURSDAY="thursday",e.FRIDAY="friday",e.SATURDAY="saturday"}(Pn||(Pn={}));var kn,In=z.Record({type:z.Union(z.Literal(An.REPEATEACHWEEK),z.Literal(An.REPEATBYDAY),z.Literal(An.ALWAYS)),startTime:z.String,endTime:z.String,days:z.Array(z.Union(z.Literal(Pn.SUNDAY),z.Literal(Pn.MONDAY),z.Literal(Pn.TUESDAY),z.Literal(Pn.WEDNESDAY),z.Literal(Pn.THURSDAY),z.Literal(Pn.FRIDAY),z.Literal(Pn.SATURDAY)))});Pn.SUNDAY,Pn.MONDAY,Pn.TUESDAY,Pn.WEDNESDAY,Pn.THURSDAY,Pn.FRIDAY,Pn.SATURDAY,function(e){e.SECONDS="s",e.MINUTES="m",e.HOURS="h",e.DAYS="d"}(kn||(kn={}));var xn,jn,Cn=z.Union(z.Literal(kn.SECONDS),z.Literal(kn.MINUTES),z.Literal(kn.HOURS),z.Literal(kn.DAYS)),Un=z.Record({value:z.Number,unit:Cn});!function(e){e.AND="and",e.OR="or"}(xn||(xn={})),function(e){e.ASSET="assets",e.ASSET_TYPE="asset_types",e.AREA="areas",e.AREA_TYPE="area_types",e.STATE="state"}(jn||(jn={}));var Ln,Bn,Dn=z.Union(z.Literal(jn.ASSET),z.Literal(jn.ASSET_TYPE),z.Literal(jn.AREA),z.Literal(jn.AREA_TYPE),z.Literal(jn.STATE)),Fn=z.Record({id:z.String,ancestor_id:z.Optional(z.String),entity_type:Dn,ancestor_entity_type:z.Optional(z.String),all_inclusive:z.Boolean}),Mn=z.Record({attribute:z.String,attribute_type:Dn,ancestor_id:z.Optional(z.String),ancestor_entity_type:z.Optional(z.String),operator:z.String,value:z.Optional(z.Union(z.Boolean,z.String,z.Number)),duration:Un,all_inclusive:z.Optional(z.Boolean),comparePreviousValue:z.Optional(z.Boolean),comparePreviousNumberType:z.Optional(Nn)}),qn=z.Record({entity:Fn,relationship:Mn}),Gn=z.Lazy((function(){var e;return z.Record((s(e={},xn.AND,z.Array(z.Union(qn,Gn))),s(e,xn.OR,z.Array(z.Union(qn,Gn))),e))})),Yn=(Pn.SUNDAY,Pn.MONDAY,Pn.TUESDAY,Pn.WEDNESDAY,Pn.THURSDAY,Pn.FRIDAY,Pn.SATURDAY,te("item_id",{id:J.String,label:J.String,timeframe:J.JsonInString(In),conditions:J.JsonInString(Gn),rule_type_id:J.String,priority:J.Number,severity:J.Number,event_type_id:J.String,action_ids:J.JsonInString(z.Array(z.String)),closes_ids:J.JsonInString(z.Array(z.String)),closed_by_rule:J.JsonInString(X),is_invalid:J.Boolean,is_disabled:J.Boolean})),zn=O({reqType:ot.reqType,respType:ot.createQueryableRespType(Yn.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where(oe().expr().and("".concat(T.RULES,".rule_type_id IN ?"),oe().select().field("id").from(T.RULE_TYPES).where(oe().expr().and("".concat(T.RULE_TYPES,".id IN ?"),oe().select().field("rule_type_id").from(T.RULE_TYPES_GROUPS).where(We("".concat(T.RULE_TYPES_GROUPS,".group_id"),t))))))}),{table:T.RULES,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());!function(e){e.ASSET_TYPES="asset_types",e.ASSETS="assets",e.AREA_TYPES="area_types",e.AREAS="areas"}(Ln||(Ln={})),function(e){e.STATE="state",e.AREA="area"}(Bn||(Bn={}));var Vn,Hn=z.Union(z.Literal(Bn.STATE),z.Literal(Bn.AREA));!function(e){e.BOOLEAN="boolean",e.NUMBER="number",e.STRING="string"}(Vn||(Vn={}));var Qn=z.Union(z.Literal(Vn.BOOLEAN),z.Literal(Vn.NUMBER),z.Literal(Vn.STRING)),Jn={id:Ln.ASSETS,type:"all",label:"Assets"},Wn=z.Record({id:z.Literal(Ln.ASSETS),type:z.Literal("all"),label:z.Literal("Assets")}),Kn={id:Ln.ASSET_TYPES,type:"types",label:"Asset Types"},Xn=z.Record({id:z.Literal(Ln.ASSET_TYPES),type:z.Literal("types"),label:z.Literal("Asset Types")}),$n={id:Ln.AREAS,type:"all",label:"Areas"},Zn=z.Record({id:z.Literal(Ln.AREAS),type:z.Literal("all"),label:z.Literal("Areas")}),ei={id:Ln.AREA_TYPES,type:"types",label:"Area Types"},ti=z.Record({id:z.Literal(Ln.AREA_TYPES),type:z.Literal("types"),label:z.Literal("Area Types")}),ri=[Jn,Kn],ni=[$n,ei],ii=([].concat(ri,ni),z.Union(Wn,Xn)),oi=z.Union(Zn,ti),ai=z.Union(ii,oi),ui=z.Record({prefix:z.String,selected_entity:z.Record({value:z.Union(z.Literal("all"),z.String),ancestorId:z.Optional(z.String)}),allow_types:z.Boolean,allow_specific:z.Boolean,suffix:z.String,filter_type:z.Array(ai)}),ci=z.Record({entity:ui}),si=z.Record({attribute:z.String,attribute_label:z.String,attribute_type:Qn,suffix:z.String,comparePreviousValue:z.Optional(z.Boolean)}),li=z.Record({equal:z.Optional(z.Boolean),notEqual:z.Optional(z.Boolean),true:z.Optional(z.String),false:z.Optional(z.String)}),fi=z.Record({equal:z.String,notEqual:z.String,value:z.Optional(z.String)}),pi=z.Record({value:z.Optional(z.Number),greaterThan:z.String,lessThan:z.String,equal:z.String,notEqual:z.String,greaterThanInclusive:z.String,lessThanInclusive:z.String,units:z.String,comparePreviousNumberType:z.Optional(Nn)}),di=z.Union(li,fi,pi),vi=z.Intersect(di,si),hi=z.Record({inside:z.String,outside:z.String}),yi=z.Record({relationship:z.Union(vi,hi)}),gi=z.Record({include_duration:z.Boolean}),_i=z.Record({duration:gi}),Si=z.Tuple(ci,yi,_i),bi=z.Tuple(ci,yi,ci,_i),mi=z.Record({type:Hn,meta:z.Union(Si,bi)}),Oi=z.Record({and:z.Optional(z.Array(mi)),or:z.Optional(z.Array(mi))}),Ei=z.Union(mi,Oi),Ti=z.Record({and:z.Optional(z.Array(Ei)),or:z.Optional(z.Array(Ei))}),Ri=(Bn.STATE,[].concat(ri),Vn.STRING,Bn.AREA,[].concat(ri),[].concat(ni),te("item_id",{id:J.String,include_timeframe:J.Boolean,conditions:J.JsonInString(Ti),label:J.String,event_type_ids:J.JsonInString(z.Array(z.String)),is_external:J.Boolean,is_invalid:J.Boolean})),wi=O({reqType:ot.reqType,respType:ot.createQueryableRespType(Ri.backend)})(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.abrupt("return",tt((function(e){var t=e.user.groups;return oe().select().where(oe().expr().and("".concat(T.RULE_TYPES,".id IN ?"),oe().select().field("rule_type_id").from(T.RULE_TYPES_GROUPS).where(We("".concat(T.RULE_TYPES_GROUPS,".group_id"),t))))}),{table:T.RULE_TYPES,query:n})(r).then(ot.convertResp));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());function Ai(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ai(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ni,ki,Ii,xi=z.Record({mapbox:z.Optional(z.Record({apiKey:z.String})),mailgun:z.Optional(z.Record({apiKey:z.String,domain:z.String,sender:z.String})),twilio:z.Optional(z.Record({userId:z.String,password:z.String,sourceNumber:z.String})),nimbelink:z.Optional(z.Record({username:z.String,password:z.String,api_key:z.String}))}),ji=z.Dictionary(z.Number),Ci=z.Record({mapbox:z.Optional(z.Record({defaultMapStyle:z.Optional(z.String)})),custom_edge_uri:z.Optional(z.Record({use_custom_edge_uri_in_event_link:z.Boolean,custom_edge_uri:z.String})),display_asset_logs_button:z.Optional(z.Boolean),display_asset_plots_button:z.Optional(z.Boolean),data_retention:z.Optional(z.Record({platform:z.Optional(ji),edge:z.Optional(ji)})),external_links:z.Optional(z.Array(z.Record({name:z.String,url:z.String})))}),Ui=te("item_id",{id:J.String,name:J.String,contact:J.String,description:J.String,logo_url:J.String,api_access:J.JsonInString(xi),configuration:J.JsonInString(Ci)}),Li=(re()({toParsed:function(e){var t=P(e.configuration,{}),r=P(e.api_access,{});return Pi(Pi({},e),{},{api_access:r,configuration:t})},toBackend:function(e){return Pi(Pi({},e),{},{api_access:JSON.stringify(e.api_access),configuration:JSON.stringify(e.configuration)})}}),O({reqType:ot.reqType,respType:ot.createQueryableRespType(Ui.backend)})((function(e,t){var r=e.query;return tt((function(){return oe().select()}),{table:T.SYSTEM_INFO,query:r})(t).then(ot.convertResp)}))),Bi=z.Record({date:z.String}),Di=z.Record({date:z.String,started:z.Boolean});!function(e){e.General="general",e.Admin="admin"}(Ni||(Ni={})),function(e){e.V1="v1"}(ki||(ki={})),Ni.General,ki.V1,function(e){e.ENGLISH="en-US",e.FRENCH="fr"}(Ii||(Ii={}));var Fi=z.Union(z.Literal(Ii.ENGLISH),z.Literal(Ii.FRENCH)),Mi=z.Record({language:z.Optional(Fi)}),qi=z.Record({darkMode:z.Optional(z.Boolean)}),Gi=z.Record({language:z.Optional(Mi),theme:z.Optional(qi)}),Yi=te("user_id",{email:J.String,creation_date:J.String,areas:J.String,assets:J.String,cb_service_account:J.Boolean,first_name:J.String,group_ids:J.JsonInString(z.Array(z.String)),last_name:J.String,phone:J.String,photo_url:J.String,pin:J.String,user_type:J.String,terms_agreement:J.JsonB(W(Bi)),app_tour:J.JsonB(W(Di)),user_preferences:J.JsonB(Gi),invite_status:J.String,invite_expiry:J.String}),zi=O({reqType:ot.reqType,respType:ot.createQueryableRespType(Yi.backend)})(function(){var e=t(a().mark((function e(t,r){var n,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.client,(i=ae(t.query)).notEqualTo("cb_service_account",!0),e.next=5,x(Promise.all([n.Users().read(i),n.Users().count(i)]));case 5:if(!(o=e.sent).error){e.next=8;break}throw o.msg;case 8:return e.abrupt("return",ot.convertResp({rows:o.data[0],count:o.data[1].count}));case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());function Vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qi,Ji,Wi,Ki,Xi,$i=G({"groups.read":m({description:"Use to fetch groups",handler:Cr}),"groupsForCallerUser.read":m({description:"Use to fetch groups for the calling user",handler:Dr}),"groupsForActionType.read":g({description:"Use to fetch groups for a specific action type",handler:Ur}),"groupsForAreaType.read":g({description:"Use to fetch groups for a specific area type",handler:Lr}),"groupsForAssetType.read":g({description:"Use to fetch groups for a specific asset type",handler:Br}),"groupsForEventType.read":g({description:"Use to fetch groups for a specific event type",handler:Mr}),"groupsForRuleType.read":g({description:"Use to fetch groups for a specific rule type",handler:qr}),"groupsForDashboard.read":m({description:"Use to fetch groups for a specific dashboard",handler:Fr}),"actionTypes.read":m({description:"Use to fetch action types",handler:_t}),"areaTypes.read":m({description:"Use to fetch area types",handler:Mt}),"assetTypes.read":m({description:"Use to fetch asset types",handler:fr}),"eventTypes.read":m({description:"Use to fetch event types",handler:Ir}),"ruleTypes.read":m({description:"Use to fetch rule types",handler:wi}),"assets.read":m({description:"Use to fetch assets",handler:rr}),"assetsForMap.read":m({description:"Use to fetch assets to display on maps",handler:nr}),"areas.read":m({description:"Use to fetch areas",handler:wt}),"assetComments.read":m({description:"Use to fetch asset comments",handler:Wt}),"events.read":m({description:"Use to fetch events",handler:Rr}),"reports.read":m({description:"Use to fetch reports",handler:En}),"rules.read":m({description:"Use to fetch rules",handler:zn}),"actions.read":m({description:"Use to fetch actions",handler:at}),"eventHistory.read":m({description:"Use to fetch history of an event",handler:Or}),"assetTrees.read":m({description:"Use to fetch asset trees",handler:lr}),"heatmap_reports.read":m({description:"Use to fetch heatmap reports",handler:on}),"asset_image_history.read":m({description:"Use to fetch asset image history",handler:Xt}),"dashboards.read":m({description:"Use to fetch dashboards",handler:Sr}),"openEventsForAssets.read":m({description:"Use to fetch open events for assets",handler:vn}),"imageInBucket.read":m({description:"Use to fetch images from a bucket with id",handler:an})},[function(e,t,r){return 0===t.user.groups.length&&(console.log("no groups"),r.success({DATA:[],COUNT:0})),Promise.resolve()}]),Zi=G({"rolesForUser.read":g({description:"Use to fetch roles for a specific user",handler:wn}),"adapterConfig.read":g({description:"Use to fetch adapter configurations",handler:bt}),"roles.read":g({description:"Use to fetch roles",handler:Rn}),"users.read":m({description:"Use to fetch users",handler:zi}),"systemInfo.read":m({description:"Use to fetch system info",handler:Li}),"models.read":m({description:"Use to fetch models",handler:pn}),"jobs.read":m({description:"Use to fetch jobs",handler:sn})}),eo=(Qi={name:(Wi={name:"fetch",routes:Hi(Hi({},$i),Zi)}).name,routes:Wi.routes},Ji=Qi.routes,q(q({},Xi={name:Qi.name,getRoute:function(e){var t=Ji[e];if(!t)throw new Error("Unable to find route with name '".concat(e,"'"));return t}}),{},{handle:(Ki=t(a().mark((function e(t,r,n,i){var o,u,s,l,f,p,d,v,h,y,g,_;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.client,s=n.req,l=Xi.getRoute(t),console.log("route name: ".concat(t)),f=s.caller.userid,e.next=6,L({client:u}).get(f);case 6:return p=e.sent,e.next=9,B({client:u}).get(f);case 9:d=e.sent,l.hasPermission(d)||(console.log("invalid permissions"),i.status(403),i.send("User does not have permission for endpoint '".concat(t,"'"))),v={client:u,user:{groups:p.group_ids,roles:d,permissions:Y(d)}},h=null!==(o=l.middlewares)&&void 0!==o?o:[],y=D(h),e.prev=14,y.s();case 16:if((g=y.n()).done){e.next=22;break}return _=g.value,e.next=20,_(r,v,i);case 20:e.next=16;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(14),y.e(e.t0);case 27:return e.prev=27,y.f(),e.finish(27);case 30:return e.prev=30,e.abrupt("return",l.handle(r,{client:u,user:{groups:p.group_ids,roles:d,permissions:Y(d)}},i));case 34:return e.prev=34,e.t1=e.catch(30),console.log("unknown error",e.t1),i.status(500),i.send("Unknown error: ".concat(c(e.t1))),e.abrupt("return");case 40:case"end":return e.stop()}}),e,null,[[14,24,27,30],[30,34]])}))),function(e,t,r,n){return Ki.apply(this,arguments)})}));function to(){return to=t(a().mark((function e(r,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ClearBladeAsync.Preloader().listen(function(){var e=t(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eo.handle(t.params.name,t.params.body,{client:ClearBladeAsync,req:t},r);case 3:n=e.sent,r.success(n),e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(0),console.log("unknown error",e.t0),r.status(500),r.send("Unknown error: ".concat(c(e.t0))),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()).catch((function(e){console.log("unknown error",e),n.status(500),n.send("Unknown error: ".concat(c(e)))}));case 1:case"end":return e.stop()}}),e)}))),to.apply(this,arguments)}r.g.fetchTableItems=function(e,t){return to.apply(this,arguments)}}()}();